Index: siteinfo.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>module.exports = {\n  acid: -1,\n  version: \"3.1.7\",\n  apiroot: \"http://www.shop.com/web/index.php?store_id=1&r=api/\"\n};
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/siteinfo.js b/siteinfo.js
--- a/siteinfo.js	
+++ b/siteinfo.js	
@@ -1,5 +1,5 @@
 module.exports = {
   acid: -1,
   version: "3.1.7",
-  apiroot: "http://www.shop.com/web/index.php?store_id=1&r=api/"
+  apiroot: "https://shop.hizh.net//web/index.php?store_id=1&r=api/"
 };
\ No newline at end of file
Index: project.config.json
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>{\n  \"description\": \"项目配置文件\",\n  \"packOptions\": {\n    \"ignore\": []\n  },\n  \"permissions\": {\n    \"openapi\": [\n      \"subscribeMessage\"\n    ]\n  },\n  \"setting\": {\n    \"urlCheck\": false,\n    \"es6\": true,\n    \"enhance\": false,\n    \"postcss\": true,\n    \"preloadBackgroundData\": false,\n    \"minified\": true,\n    \"newFeature\": true,\n    \"coverView\": true,\n    \"nodeModules\": false,\n    \"autoAudits\": false,\n    \"showShadowRootInWxmlPanel\": true,\n    \"scopeDataCheck\": false,\n    \"uglifyFileName\": false,\n    \"checkInvalidKey\": true,\n    \"checkSiteMap\": true,\n    \"uploadWithSourceMap\": true,\n    \"compileHotReLoad\": false,\n    \"useMultiFrameRuntime\": false,\n    \"useApiHook\": true,\n    \"babelSetting\": {\n      \"ignore\": [],\n      \"disablePlugins\": [],\n      \"outputPath\": \"\"\n    },\n    \"enableEngineNative\": false,\n    \"bundle\": false,\n    \"useIsolateContext\": true,\n    \"useCompilerModule\": true,\n    \"userConfirmedUseCompilerModuleSwitch\": false,\n    \"packNpmManually\": false,\n    \"packNpmRelationList\": [],\n    \"minifyWXSS\": true\n  },\n  \"compileType\": \"miniprogram\",\n  \"libVersion\": \"2.14.1\",\n  \"appid\": \"wx257210a837db11b0\",\n  \"projectname\": \"tph\",\n  \"cloudfunctionTemplateRoot\": \"\",\n  \"debugOptions\": {\n    \"hidedInDevtools\": []\n  },\n  \"scripts\": {},\n  \"simulatorType\": \"wechat\",\n  \"simulatorPluginLibVersion\": {},\n  \"condition\": {\n    \"search\": {\n      \"list\": []\n    },\n    \"conversation\": {\n      \"list\": []\n    },\n    \"plugin\": {\n      \"list\": []\n    },\n    \"game\": {\n      \"list\": []\n    },\n    \"gamePlugin\": {\n      \"list\": []\n    },\n    \"miniprogram\": {\n      \"list\": [\n        {\n          \"id\": -1,\n          \"name\": \"pages/cart/cart\",\n          \"pathName\": \"pages/cart/cart\",\n          \"query\": \"\",\n          \"scene\": null\n        },\n        {\n          \"id\": -1,\n          \"name\": \"pages/article-detail/article-detail\",\n          \"pathName\": \"pages/article-detail/article-detail\",\n          \"scene\": null\n        }\n      ]\n    }\n  }\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/project.config.json b/project.config.json
--- a/project.config.json	
+++ b/project.config.json	
@@ -26,8 +26,9 @@
     "checkSiteMap": true,
     "uploadWithSourceMap": true,
     "compileHotReLoad": false,
-    "useMultiFrameRuntime": false,
+    "useMultiFrameRuntime": true,
     "useApiHook": true,
+    "useApiHostProcess": false,
     "babelSetting": {
       "ignore": [],
       "disablePlugins": [],
@@ -38,6 +39,7 @@
     "useIsolateContext": true,
     "useCompilerModule": true,
     "userConfirmedUseCompilerModuleSwitch": false,
+    "userConfirmedBundleSwitch": true,
     "packNpmManually": false,
     "packNpmRelationList": [],
     "minifyWXSS": true
@@ -45,7 +47,7 @@
   "compileType": "miniprogram",
   "libVersion": "2.14.1",
   "appid": "wx257210a837db11b0",
-  "projectname": "tph",
+  "projectname": "demo",
   "cloudfunctionTemplateRoot": "",
   "debugOptions": {
     "hidedInDevtools": []
Index: pages/set-pwd/set-pwd.json
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>{\n    \"navigationBarTitleText\": \"设置支付密码\"\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/pages/set-pwd/set-pwd.json b/pages/set-pwd/set-pwd.json
--- a/pages/set-pwd/set-pwd.json	
+++ b/pages/set-pwd/set-pwd.json	
@@ -1,3 +1,4 @@
 {
-    "navigationBarTitleText": "设置支付密码"
+    "navigationBarTitleText": "设置支付密码",
+    "enablePullDownRefresh": true
 }
\ No newline at end of file
Index: pages/set-pwd/set-pwd.wxml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><view>\n    <view wx:if='{{showPayPwdInput}}'>\n        <view class='input_title'>\n            <text>设置密码</text>\n        </view>\n            <view class='input_row' catchtap='getFocus'>\n                <view class='pwd_item' wx:for='{{6}}' wx:key='item' wx:for-index='i'>\n                    <text wx:if='{{pwdVal.length>i}}'></text>\n                </view>\n            </view>\n            <input class='input_control' password type='number' focus='{{payFocus}}' bindinput='inputPwd' maxlength='6'/>\n        </view>\n    <view class=\"submit\" bindtap=\"submit\" wx:if=\"{{showPayPwdInput}}\">下一步</view>\n\n\n    <view wx:if='{{!showPayPwdInput}}'>\n        <view class='input_title'>\n            <text>确认密码</text>\n        </view>\n        <view class='input_row' catchtap='getFocus'>\n            <view class='pwd_item' wx:for='{{6}}' wx:key='item' wx:for-index='i'>\n                <text wx:if='{{pwdVal.length>i}}'></text>\n            </view>\n        </view>\n        <input class='input_control' password type='number' focus='{{payFocus}}' bindinput='inputPwd' maxlength='6'/>\n    </view>\n    <view class=\"submit\" bindtap=\"submit\" wx:wx:if=\"{{!showPayPwdInput}}\">确认</view>\n</view>\n\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/pages/set-pwd/set-pwd.wxml b/pages/set-pwd/set-pwd.wxml
--- a/pages/set-pwd/set-pwd.wxml	
+++ b/pages/set-pwd/set-pwd.wxml	
@@ -1,29 +1,62 @@
 <view>
+    <!--   设置密码   -->
     <view wx:if='{{showPayPwdInput}}'>
         <view class='input_title'>
             <text>设置密码</text>
         </view>
-            <view class='input_row' catchtap='getFocus'>
-                <view class='pwd_item' wx:for='{{6}}' wx:key='item' wx:for-index='i'>
-                    <text wx:if='{{pwdVal.length>i}}'></text>
-                </view>
-            </view>
-            <input class='input_control' password type='number' focus='{{payFocus}}' bindinput='inputPwd' maxlength='6'/>
-        </view>
-    <view class="submit" bindtap="submit" wx:if="{{showPayPwdInput}}">下一步</view>
+        <view class='input_row' catchtap='getFocus'>
+            <view class='pwd_item' wx:for='{{6}}' wx:key='item' wx:for-index='i'>
+                <text wx:if='{{pwdVal.length>i}}'></text>
+            </view>
+        </view>
+        <input class='input_control' password type='number' focus='{{payFocus}}' bindinput='inputPwd1' maxlength='6'/>
+        <view class="submit" wx:if='{{showPayPwdInput}}'>下一步</view>
+    </view>
 
-
-    <view wx:if='{{!showPayPwdInput}}'>
+    <view wx:if='{{showPayPwdInput2}}'>
         <view class='input_title'>
             <text>确认密码</text>
         </view>
-        <view class='input_row' catchtap='getFocus'>
+        <view class='input_row' catchtap='getFocal'>
             <view class='pwd_item' wx:for='{{6}}' wx:key='item' wx:for-index='i'>
-                <text wx:if='{{pwdVal.length>i}}'></text>
+                <text wx:if='{{pwdVal2.length>i}}'></text>
             </view>
         </view>
-        <input class='input_control' password type='number' focus='{{payFocus}}' bindinput='inputPwd' maxlength='6'/>
+        <input class='input_control' password type='number' focus='{{focus}}' bindinput='inputPwd2' maxlength='6'/>
     </view>
-    <view class="submit" bindtap="submit" wx:wx:if="{{!showPayPwdInput}}">确认</view>
+    <view class="submit" bindtap="submit" wx:if="{{showPayPwdInput2}}">确认</view>
+
+
+    <!--   修改密码    -->
+    <view wx:if="{{code}}">
+        <view class="container">
+            <view class="login-from">
+                <!--账号-->
+                <view class="inputView">
+                    <label class="loginLab">旧密码</label>
+                    <input class="inputText" placeholder="请输入旧密码"  value="{{oldPasswords}}"  maxlength='6'  password type="number" bindinput="oldPassword"/>
+                </view>
+                <view class="line"></view>
+
+                <!--密码-->
+                <view class="inputView">
+                    <label class="loginLab">新密码</label>
+                    <input class="inputText" type="number"  value="{{newPasswords}}" password placeholder="请输入新密码" maxlength='6' bindinput="newPassword"/>
+                </view>
+                <view class="line"></view>
+                <!--确认密码-->
+                <view class="inputView">
+                    <label class="loginLab">确认密码</label>
+                    <input class="inputText" type="number"  value="{{affirmPasswords}}" password placeholder="请确认密码" maxlength='6' bindinput="affirmPassword"/>
+                </view>
+                <view class="line"></view>
+                <!--按钮-->
+                <view class="loginBtnView">
+                    <button class="loginBtn" type="primary" bindtap="amend">修改密码  
+                    </button>
+                </view>
+            </view>
+        </view>
+    </view>
 </view>
 
Index: ext.json
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>{\n  \"extEnable\": true,\n  \"extAppid\": \"wx257210a837db11b0\",\n  \"directCommit\": false,\n  \"ext\": {\n    \"name\": \"wechat\",\n    \"attr\": {\n      \"host\": \"https://shop.hizh.net/getticket.php\",\n      \"users\": [\n        \"user_1\",\n        \"user_2\"\n      ]\n    }\n  },\n  \"extPages\": {\n    \"pages/logs/logs\": {\n      \"navigationBarTitleText\": \"logs\"\n    }\n  },\n  \"window\":{\n    \"backgroundTextStyle\":\"light\",\n    \"navigationBarBackgroundColor\": \"#fff\",\n    \"navigationBarTitleText\": \"Demo\",\n    \"navigationBarTextStyle\":\"black\"\n  },\n  \"networkTimeout\": {\n    \"request\": 10000,\n    \"downloadFile\": 10000\n  }\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/ext.json b/ext.json
--- a/ext.json	
+++ b/ext.json	
@@ -5,7 +5,7 @@
   "ext": {
     "name": "wechat",
     "attr": {
-      "host": "https://shop.hizh.net/getticket.php",
+      "host": "http://www.shop.com//getticket.php",
       "users": [
         "user_1",
         "user_2"
Index: pages/set-pwd/set-pwd.wxss
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>/* 支付密码css start */\n.bg_layer {\n    position: fixed;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    background-color: rgba(0, 0, 0, 0.6);\n    z-index: 9998;\n}\n\n.input_main {\n    position: fixed;\n    left: 0;\n    bottom: 500rpx;\n    width: 100%;\n    height: 394rpx;\n    background-color: #fff;\n    z-index: 9999;\n}\n\n.input_title {\n    width: 100%;\n    height: 90rpx;\n    line-height: 90rpx;\n    text-align: center;\n    font-size: 32rpx;\n    border-bottom: 1rpx solid #e2e2e2;\n}\n\n.input_back {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 80rpx;\n    height: 90rpx;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.input_back text {\n    width: 20rpx;\n    height: 20rpx;\n    background-color: white;\n    border: 1rpx solid #aaa;\n    border-width: 5rpx 0 0 5rpx;\n    transform: rotate(-45deg);\n}\n\n.input_tip {\n    margin: 30rpx;\n    font-size: 24rpx;\n    color: #888;\n}\n\n/* 密码掩码模拟 */\n.input_row {\n    width: 690rpx;\n    margin: 0 auto;\n    height: 98rpx;\n    position: relative;\n    display: flex;\n    align-items: center;\n    background: #FFFFFF;\n    border: 1rpx solid #e2e2e2;\n    border-radius: 20rpx;\n}\n\n.input_row .pwd_item {\n    flex: 1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n    border-right: 1rpx solid #e2e2e2;\n    position: relative;\n}\n\n.pwd_item:nth-last-of-type(1) {\n    border-right: 0;\n}\n\n.pwd_item text {\n    width: 30rpx;\n    height: 30rpx;\n    border-radius: 30rpx;\n    background-color: #555;\n}\n\n\n.forget_pwd {\n    float: right;\n    margin: 30rpx;\n    width: 100rpx;\n    text-align: right;\n    font-size: 24rpx;\n    color: #ff7800;\n}\n\n/* 文本输入框位置: 设置到左边隐藏 */\n.input_control {\n    position: relative;\n    left: -300rpx;\n    bottom: 0;\n    width: 100rpx;\n    height: 100rpx;\n}\n\n.submit {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    height: 98rpx;\n    background: rgba(253, 49, 49, 1);\n    box-shadow: 0px -4px 6px 0px rgba(0, 0, 0, 0.02);\n    color: #FFFFFF;\n    text-align: center;\n    line-height: 98rpx;\n    color: #FFFFFF;\n    font-size: 34rpx;\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/pages/set-pwd/set-pwd.wxss b/pages/set-pwd/set-pwd.wxss
--- a/pages/set-pwd/set-pwd.wxss	
+++ b/pages/set-pwd/set-pwd.wxss	
@@ -120,4 +120,76 @@
     line-height: 98rpx;
     color: #FFFFFF;
     font-size: 34rpx;
+}
+page{
+    height: 100%;
+}
+
+.container {
+    height: 100%;
+    display: flex;
+    flex-direction: column;   padding: 0;
+    box-sizing: border-box;
+    background-color: #f2f2f2
+}
+
+/*登录图片*/
+.login-icon{
+    flex: none;
+}
+.login-img{
+    width: 750rpx;
+}
+
+/*表单内容*/
+.login-from {
+    margin-top: 20px;
+    flex: auto;
+    height:100%;
+}
+
+.inputView {
+    background-color: #fff;
+    line-height: 44px;
+}
+/*输入框*/
+.nameImage, .keyImage {
+    margin-left: 22px;
+    width: 14px;
+    height: 14px
+}
+
+.loginLab {
+    margin: 15px 15px 15px 10px;
+    color: #545454;
+    font-size: 14px
+}
+.inputText {
+    flex: block;
+    float: right;
+    text-align: right;
+    margin-right: 22px;
+    margin-top: 11px;
+    color: #cccccc;
+    font-size: 14px }
+
+.line {
+    width: 100%;
+    height: 1px;
+    background-color: #cccccc;
+    margin-top: 1px;
+}
+/*按钮*/
+.loginBtnView {
+    width: 100%;
+    height: auto;
+    background-color: #f2f2f2;
+    margin-top: 0px;
+    margin-bottom: 0px;
+    padding-bottom: 0px;
+}
+
+.loginBtn {
+    width: 80%;
+    margin-top: 35px;
 }
\ No newline at end of file
Index: app.json
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>{\n  \"pages\": [\n    \"pages/index/index\",\n    \"pages/cart/cart\",\n    \"pages/goods/goods\",\n    \"pages/list/list\",\n    \"pages/user/user\",\n    \"pages/search/search\",\n    \"pages/order-submit/order-submit\",\n    \"pages/order/order\",\n    \"pages/order-detail/order-detail\",\n    \"pages/address/address\",\n    \"pages/address-edit/address-edit\",\n    \"pages/address-picker/address-picker\",\n    \"pages/test/test\",\n    \"pages/favorite/favorite\",\n    \"pages/order-refund/order-refund\",\n    \"pages/order-refund-detail/order-refund-detail\",\n    \"pages/add-share/index\",\n    \"pages/share/index\",\n    \"pages/cash/cash\",\n    \"pages/share-money/share-money\",\n    \"pages/cash-detail/cash-detail\",\n    \"pages/share-team/share-team\",\n    \"pages/share-order/share-order\",\n    \"pages/share-qrcode/share-qrcode\",\n    \"pages/order-comment/order-comment\",\n    \"pages/article-list/article-list\",\n    \"pages/article-detail/article-detail\",\n    \"pages/express-detail/express-detail\",\n    \"pages/cat/cat\",\n    \"pages/coupon/coupon\",\n    \"pages/clerk/clerk\",\n    \"pages/video/video-list\",\n    \"pages/coupon-list/coupon-list\",\n    \"pages/topic-list/topic-list\",\n    \"pages/topic/topic\",\n    \"pages/member/member\",\n    \"pages/web/web\",\n    \"pages/shop/shop\",\n    \"pages/shop-detail/shop-detail\",\n    \"pages/card/card\",\n    \"pages/card-clerk/card-clerk\",\n    \"pages/miaosha/miaosha\",\n    \"pages/miaosha/details/details\",\n    \"pages/miaosha/order-submit/order-submit\",\n    \"pages/miaosha/order/order\",\n    \"pages/miaosha/order-detail/order-detail\",\n    \"pages/miaosha/express-detail/express-detail\",\n    \"pages/miaosha/order-comment/order-comment\",\n    \"pages/miaosha/order-refund/order-refund\",\n    \"pages/miaosha/order-refund-detail/order-refund-detail\",\n    \"pages/pt/index/index\",\n    \"pages/pt/list/list\",\n    \"pages/pt/details/details\",\n    \"pages/pt/order-submit/order-submit\",\n    \"pages/pt/order/order\",\n    \"pages/pt/order-details/order-details\",\n    \"pages/pt/group/details\",\n    \"pages/pt/express-detail/express-detail\",\n    \"pages/pt/order-comment/order-comment\",\n    \"pages/pt/comment/comment\",\n    \"pages/pt/clerk/clerk\",\n    \"pages/pt/order-refund/order-refund\",\n    \"pages/pt/order-refund-detail/order-refund-detail\",\n    \"pages/pt/search/search\",\n    \"pages/book/index/index\",\n    \"pages/book/details/details\",\n    \"pages/book/submit/submit\",\n    \"pages/book/order/order\",\n    \"pages/book/order/details\",\n    \"pages/book/shop/shop\",\n    \"pages/book/clerk/clerk\",\n    \"pages/book/order-comment/order-comment\",\n    \"pages/book/comment/comment\",\n    \"pages/fxhb/open/open\",\n    \"pages/fxhb/detail/detail\",\n    \"pages/quick-purchase/index/index\",\n    \"pages/balance/balance\",\n    \"pages/recharge/recharge\",\n    \"pages/bangding/bangding\",\n    \"pages/web/login/login\",\n    \"pages/web/authorization/authorization\",\n    \"pages/balance/detail\",\n    \"pages/login/login\",\n    \"pages/integral-mall/index/index\",\n    \"pages/integral-mall/shuoming/index\",\n    \"pages/integral-mall/detail/index\",\n    \"pages/integral-mall/exchange/index\",\n    \"pages/integral-mall/register/index\",\n    \"pages/integral-mall/coupon-info/index\",\n    \"pages/integral-mall/goods-info/index\",\n    \"pages/integral-mall/order-submit/index\",\n    \"pages/integral-mall/order/order\",\n    \"pages/integral-mall/clerk/clerk\",\n    \"pages/store-disabled/store-disabled\",\n    \"pages/new-order-submit/new-order-submit\",\n    \"pages/coupon-detail/coupon-detail\",\n    \"pages/card-detail/card-detail\",\n    \"pages/demo/demo\",\n    \"pages/zhibo/zhibo\"\n  ],\n  \"window\": {\n    \"backgroundTextStyle\": \"light\",\n    \"navigationBarBackgroundColor\": \"#fff\",\n    \"navigationBarTitleText\": \"Mall\",\n    \"navigationBarTextStyle\": \"black\",\n    \"backgroundColor\": \"#EFEFF4\"\n  },\n  \"subPackages\": [\n    {\n      \"root\": \"mch/\",\n      \"pages\": [\n        \"m/myshop/myshop\",\n        \"m/setting/setting\",\n        \"m/goods/goods\",\n        \"m/order/order\",\n        \"m/order-detail/order-detail\",\n        \"m/order-send/order-send\",\n        \"m/shop-qrcode/shop-qrcode\",\n        \"m/account/account\",\n        \"m/account-rest/account-rest\",\n        \"m/account-log/account-log\",\n        \"m/cash-log/cash-log\",\n        \"m/tongji/tongji\",\n        \"m/order-refund/order-refund\",\n        \"apply/apply\",\n        \"shop/shop\",\n        \"shop-list/shop-list\",\n        \"shop-cat/shop-cat\",\n        \"m/cash/cash\",\n        \"m/settle_detail/settle_detail\",\n        \"shop-summary/shop-summary\"\n      ]\n    },\n    {\n      \"root\": \"pond/\",\n      \"pages\": [\n        \"pond/pond\",\n        \"prize/prize\",\n        \"rule/rule\"\n      ]\n    },\n    {\n      \"root\": \"bargain/\",\n      \"pages\": [\n        \"goods/goods\",\n        \"list/list\",\n        \"activity/activity\",\n        \"order-list/order-list\",\n        \"rule/rule\"\n      ]\n    },\n    {\n      \"root\": \"scratch/\",\n      \"pages\": [\n        \"index/index\",\n        \"prize/prize\",\n        \"rule/rule\"\n      ]\n    },\n    {\n      \"root\": \"lottery/\",\n      \"pages\": [\n        \"index/index\",\n        \"detail/detail\",\n        \"goods/goods\",\n        \"prize/prize\",\n        \"rule/rule\",\n        \"lucky-code/lucky-code\"\n      ]\n    },\n    {\n      \"root\": \"step/\",\n      \"pages\": [\n        \"index/index\",\n        \"detail/detail\",\n        \"goods/goods\",\n        \"dare/dare\",\n        \"rules/rules\",\n        \"top/top\",\n        \"join/join\",\n        \"log/log\",\n        \"share/share\",\n        \"friend/friend\"\n      ]\n    }\n  ],\n  \"debug\": false,\n  \"sitemapLocation\": \"sitemap.json\"\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app.json b/app.json
--- a/app.json	
+++ b/app.json	
@@ -98,7 +98,8 @@
     "pages/coupon-detail/coupon-detail",
     "pages/card-detail/card-detail",
     "pages/demo/demo",
-    "pages/zhibo/zhibo"
+    "pages/zhibo/zhibo",
+    "pages/set-pwd/set-pwd"
   ],
   "window": {
     "backgroundTextStyle": "light",
@@ -107,6 +108,11 @@
     "navigationBarTextStyle": "black",
     "backgroundColor": "#EFEFF4"
   },
+  "permission": {
+    "scope.userLocation": {
+      "desc": "你的位置信息将用于小程序位置接口的效果展示"
+    }
+  },
   "subPackages": [
     {
       "root": "mch/",
Index: pages/set-pwd/set-pwd.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>\nvar app = getApp(), api = getApp().api, longitude = \"\", latitude = \"\";\n\nPage({\n    data: {\n        mch_offline: !0,\n        showPayPwdInput: true,  //是否展示密码输入层\n        pwdVal: '',  //输入的密码\n        pwdVal2: '',\n        payFocus: true, //文本框焦点\n    },\n\n    /**\n     * 显示支付密码输入层\n     */\n    showInputLayer: function () {\n        this.setData({payFocus: true});\n    },\n    /**\n     * 隐藏支付密码输入层\n     */\n    hidePayLayer: function () {\n        this.setData({showPayPwdInput: false, payFocus: false, pwdVal: ''}, function () {\n        });\n    },\n    /**\n     * 获取焦点\n     */\n    getFocus: function () {\n        this.setData({payFocus: true});\n    },\n    /**\n     * 输入密码监听\n     */\n    inputPwd: function (e) {\n        this.setData({pwdVal: e.detail.value});\n        if (e.detail.value.length >= 6) {\n            this.hidePayLayer();\n            console.log(e.detail.value)\n        }\n    }\n})
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/pages/set-pwd/set-pwd.js b/pages/set-pwd/set-pwd.js
--- a/pages/set-pwd/set-pwd.js	
+++ b/pages/set-pwd/set-pwd.js	
@@ -1,42 +1,186 @@
+var app = getApp(), api = getApp().api;
 
-var app = getApp(), api = getApp().api, longitude = "", latitude = "";
-
+let password1 = '';
+let password2 = '';
+let olds = ''; //旧密码
+let news = ''; //新密码
+let affirm = ''; //确认密码
+let code = false;
 Page({
     data: {
         mch_offline: !0,
         showPayPwdInput: true,  //是否展示密码输入层
+        showPayPwdInput2: false, //是否展示密码输入层
         pwdVal: '',  //输入的密码
-        pwdVal2: '',
+        pwdVal2: '',  //确认密码
         payFocus: true, //文本框焦点
+        focus: false,   // 文本框焦点
+        code: false, // 是否已经输入过密码
+        oldPasswords: '',
+        newPasswords: '',
+        affirmPasswords: '',
+    },
+
+    onLoad: function () {
+        this.code = wx.getStorageSync('code')
+        if (this.code) {
+            this.setData({showPayPwdInput: false, showPayPwdInput2: false, code: true}, function () {
+            });
+        } else {
+        }
     },
 
     /**
      * 显示支付密码输入层
      */
     showInputLayer: function () {
-        this.setData({payFocus: true});
+        this.setData({payFocus: true, focus: true});
     },
     /**
      * 隐藏支付密码输入层
      */
     hidePayLayer: function () {
-        this.setData({showPayPwdInput: false, payFocus: false, pwdVal: ''}, function () {
+        this.setData({
+            showPayPwdInput: false,
+            showPayPwdInput2: true,
+            payFocus: false,
+            focus: true,
+            pwdVal: ''
+        }, function () {
         });
     },
+    // 密码匹配既提交，失败就返回
+    hideLayer: function () {
+        if (password1 != password2) {
+            wx.showToast({
+                icon: "none",
+                title: '密码不一致，请重新输入!'
+            })
+            this.setData({showPayPwdInput: true, showPayPwdInput2: false, pwdVal2: ''}, function () {
+            });
+            return
+        }
+        this.setData({pwdVal2: ''}, function () {
+        });
+        getApp().core.showLoading({
+            title: "正在提交",
+            mask: !0
+        }), getApp().request({
+            url: getApp().api.user.set_pay_pwd,
+            method: "POST",
+            data: {
+                pay_password1: password1,
+                pay_password2: password2
+            },
+            success(res) {
+                this.code = true
+                wx.setStorageSync('code', this.code)
+                getApp().core.hideLoading();
+                wx.showToast({
+                    title: res.msg
+                })
+                getApp().core.redirectTo({
+                    url: "/pages/user/user"
+                });
+            }
+        })
+    },
+
     /**
      * 获取焦点
      */
     getFocus: function () {
         this.setData({payFocus: true});
     },
+    getFocal: function () {
+        this.setData({focus: true})
+    },
+
     /**
      * 输入密码监听
      */
-    inputPwd: function (e) {
+    inputPwd1: function (e) {
         this.setData({pwdVal: e.detail.value});
         if (e.detail.value.length >= 6) {
+            password1 = this.data.pwdVal;
             this.hidePayLayer();
-            console.log(e.detail.value)
+        }
+    },
+
+    inputPwd2: function (e) {
+        this.setData({pwdVal2: e.detail.value});
+        if (e.detail.value.length >= 6) {
+            password2 = this.data.pwdVal2;
+            this.hideLayer();
+        }
+    },
+
+    /**
+     * 修改密码
+     */
+
+    //旧密码
+    oldPassword: function (e) {
+        this.setData({oldPasswords: e.detail.value});
+        if (e.detail.value.length >= 6) {
+            olds = this.data.oldPasswords;
+        }
+    },
+    //新密码
+    newPassword: function (e) {
+        this.setData({newPasswords: e.detail.value});
+        if (e.detail.value.length >= 6) {
+            news = this.data.newPasswords;
         }
+    },
+    //确认密码
+    affirmPassword: function (e) {
+        this.setData({affirmPasswords: e.detail.value});
+        if (e.detail.value.length >= 6) {
+            affirm = this.data.affirmPasswords;
+        }
+    },
+
+    /**
+     * 发起修改请求
+     */
+    amend: function () {
+        if (affirm != news) {
+            wx.showToast({
+                icon: "none",
+                title: "密码不一致,请重新输入"
+            }),
+                this.setData({oldPasswords: '', affirmPasswords: '', newPasswords: ''});
+            return
+        }
+        getApp().core.showLoading({
+            title: "正在提交",
+            mask: !0
+        }), getApp().request({
+            url: getApp().api.user.edit_pay_pwd,
+            method: "POST",
+            data: {
+                pay_password: olds,
+                new_pay_password: affirm
+            },
+            success(res) {
+                getApp().core.hideLoading();
+                if (res.code == 1) {
+                    wx.showToast({
+                        icon: "none",
+                        title: res.msg
+                    })
+                } else {
+                    wx.showToast({
+                        title: res.msg
+                    })
+                    getApp().core.redirectTo({
+                        url: "/pages/user/user"
+                    });
+                }
+
+            }
+        })
     }
-})
\ No newline at end of file
+})
+
Index: bargain/commons/time.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>var time = {\n    page: null,\n    time_list: {\n        hour: \"00\",\n        minute: \"00\",\n        second: \"00\"\n    },\n    init: function(t) {\n        var e = this;\n        (this.page = t).setData({\n            time_list: e.time_list,\n            intval: []\n        }), t.setTimeOver = function() {\n            var i = e.page, s = setInterval(function() {\n                if (i.data.reset_time <= 0) clearInterval(s); else {\n                    var t = i.data.reset_time - 1, e = i.setTimeList(t);\n                    i.setData({\n                        reset_time: t,\n                        time_list: e\n                    });\n                }\n            }, 1e3);\n        };\n    }\n};\n\nmodule.exports = time;
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/bargain/commons/time.js b/bargain/commons/time.js
--- a/bargain/commons/time.js	
+++ b/bargain/commons/time.js	
@@ -5,18 +5,18 @@
         minute: "00",
         second: "00"
     },
-    init: function(t) {
-        var e = this;
-        (this.page = t).setData({
-            time_list: e.time_list,
+    init: function(res) {
+        var that = this;
+        (this.page = res).setData({
+            time_list: that.time_list,
             intval: []
-        }), t.setTimeOver = function() {
-            var i = e.page, s = setInterval(function() {
-                if (i.data.reset_time <= 0) clearInterval(s); else {
-                    var t = i.data.reset_time - 1, e = i.setTimeList(t);
-                    i.setData({
-                        reset_time: t,
-                        time_list: e
+        }), res.setTimeOver = function() {
+            var page = that.page, s = setInterval(function() {
+                if (page.data.reset_time <= 0) clearInterval(s); else {
+                    var reset_time = page.data.reset_time - 1, time_list = page.setTimeList(reset_time);
+                    page.setData({
+                        reset_time: reset_time,
+                        time_list: time_list
                     });
                 }
             }, 1e3);
Index: bargain/activity/activity.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>var time = require(\"../commons/time.js\"), app = getApp(), api = getApp().api, setIntval = null, is_loading = !1, is_no_more = !0;\n\nPage({\n    data: {\n        show_more: !0,\n        p: 1,\n        show_modal: !1,\n        show: !1,\n        show_more_btn: !0,\n        animationData: null,\n        show_modal_a: !1\n    },\n    onLoad: function(t) {\n        getApp().page.onLoad(this, t);\n        var a = this;\n        a.setData({\n            order_id: t.order_id\n        }), a.joinBargain(), time.init(a);\n    },\n    joinBargain: function() {\n        var a = this;\n        getApp().request({\n            url: getApp().api.bargain.bargain,\n            data: {\n                order_id: a.data.order_id\n            },\n            success: function(t) {\n                0 == t.code ? (a.getOrderInfo(), a.setData(t.data)) : (a.showToast({\n                    title: t.msg\n                }), getApp().core.hideLoading());\n            }\n        });\n    },\n    getOrderInfo: function() {\n        var a = this;\n        getApp().request({\n            url: getApp().api.bargain.activity,\n            data: {\n                order_id: a.data.order_id,\n                page: 1\n            },\n            success: function(t) {\n                0 == t.code ? (a.setData(t.data), a.setData({\n                    time_list: a.setTimeList(t.data.reset_time),\n                    show: !0\n                }), a.data.bargain_status && a.setData({\n                    show_modal: !0\n                }), a.setTimeOver(), is_no_more = !1, a.animationCr()) : a.showToast({\n                    title: t.msg\n                });\n            },\n            complete: function(t) {\n                getApp().core.hideLoading();\n            }\n        });\n    },\n    onReady: function() {\n        getApp().page.onReady(this);\n    },\n    onShow: function() {\n        getApp().page.onShow(this);\n    },\n    onHide: function() {\n        getApp().page.onHide(this);\n    },\n    onUnload: function() {\n        getApp().page.onUnload(this), clearInterval(setIntval), setIntval = null;\n    },\n    onShareAppMessage: function() {\n        getApp().page.onShareAppMessage(this);\n        var t = this;\n        return {\n            path: \"/bargain/activity/activity?order_id=\" + t.data.order_id + \"&user_id=\" + t.data.__user_info.id,\n            success: function(t) {},\n            title: t.data.share_title || null\n        };\n    },\n    loadData: function() {\n        var e = this;\n        if (getApp().core.showLoading({\n            title: \"加载中\"\n        }), !is_loading) {\n            is_loading = !0, getApp().core.showNavigationBarLoading();\n            var i = e.data.p + 1;\n            getApp().request({\n                url: getApp().api.bargain.activity,\n                data: {\n                    order_id: e.data.order_id,\n                    page: i\n                },\n                success: function(t) {\n                    if (0 == t.code) {\n                        var a = e.data.bargain_info;\n                        a = a.concat(t.data.bargain_info), e.setData({\n                            bargain_info: a,\n                            p: i,\n                            price: t.data.price,\n                            money_per: t.data.money_per,\n                            money_per_t: t.data.money_per_t\n                        }), 0 == t.data.bargain_info.length && (is_no_more = !0, i -= 1, e.setData({\n                            show_more_btn: !1,\n                            show_more: !0,\n                            p: i\n                        }));\n                    } else e.showToast({\n                        title: t.msg\n                    });\n                },\n                complete: function(t) {\n                    getApp().core.hideLoading(), getApp().core.hideNavigationBarLoading(), is_loading = !1;\n                }\n            });\n        }\n    },\n    showMore: function(t) {\n        this.data.show_more_btn && (is_no_more = !1), is_no_more || this.loadData();\n    },\n    hideMore: function() {\n        this.setData({\n            show_more_btn: !0,\n            show_more: !1\n        });\n    },\n    orderSubmit: function() {\n        var t = this;\n        getApp().core.showLoading({\n            title: \"加载中\"\n        }), getApp().core.redirectTo({\n            url: \"/bargain/goods/goods?goods_id=\" + t.data.goods_id\n        });\n    },\n    close: function() {\n        this.setData({\n            show_modal: !1\n        });\n    },\n    buyNow: function() {\n        var a = [], t = [];\n        t.push({\n            bargain_order_id: this.data.order_id\n        }), a.push({\n            mch_id: 0,\n            goods_list: t\n        }), getApp().core.showModal({\n            title: \"提示\",\n            content: \"是否确认购买？\",\n            success: function(t) {\n                t.confirm && getApp().core.redirectTo({\n                    url: \"/pages/new-order-submit/new-order-submit?mch_list=\" + JSON.stringify(a)\n                });\n            }\n        });\n    },\n    goToList: function() {\n        getApp().core.redirectTo({\n            url: \"/bargain/list/list\"\n        });\n    },\n    animationCr: function() {\n        var t = this;\n        t.animationT(), setTimeout(function() {\n            t.setData({\n                show_modal_a: !0\n            }), t.animationBig(), t.animationS();\n        }, 800);\n    },\n    animationBig: function() {\n        var t = getApp().core.createAnimation({\n            duration: 500,\n            transformOrigin: \"50% 50%\"\n        }), a = this, e = 0;\n        setInterval(function() {\n            e % 2 == 0 ? t.scale(.9).step() : t.scale(1).step(), a.setData({\n                animationData: t.export()\n            }), 500 == ++e && (e = 0);\n        }, 500);\n    },\n    animationS: function() {\n        var t = getApp().core.createAnimation({\n            duration: 500\n        });\n        t.width(\"512rpx\").height(\"264rpx\").step(), t.rotate(-2).step(), t.rotate(4).step(), \n        t.rotate(-2).step(), t.rotate(0).step(), this.setData({\n            animationDataHead: t.export()\n        });\n    },\n    animationT: function() {\n        var t = getApp().core.createAnimation({\n            duration: 200\n        });\n        t.width(\"500rpx\").height(\"500rpx\").step(), this.setData({\n            animationDataT: t.export()\n        });\n    }\n});
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/bargain/activity/activity.js b/bargain/activity/activity.js
--- a/bargain/activity/activity.js	
+++ b/bargain/activity/activity.js	
@@ -1,4 +1,7 @@
-var time = require("../commons/time.js"), app = getApp(), api = getApp().api, setIntval = null, is_loading = !1, is_no_more = !0;
+var time = require("../commons/time.js"),
+    app = getApp(), api = getApp().api,
+    setIntval = null,
+    is_loading = !1, is_no_more = !0;
 
 Page({
     data: {
@@ -10,42 +13,42 @@
         animationData: null,
         show_modal_a: !1
     },
-    onLoad: function(t) {
-        getApp().page.onLoad(this, t);
-        var a = this;
-        a.setData({
-            order_id: t.order_id
-        }), a.joinBargain(), time.init(a);
+    onLoad: function(res) {
+        getApp().page.onLoad(this, res);
+        var that = this;
+        that.setData({
+            order_id: res.order_id
+        }), that.joinBargain(), time.init(that);
     },
     joinBargain: function() {
-        var a = this;
+        var that = this;
         getApp().request({
             url: getApp().api.bargain.bargain,
             data: {
-                order_id: a.data.order_id
+                order_id: that.data.order_id
             },
             success: function(t) {
-                0 == t.code ? (a.getOrderInfo(), a.setData(t.data)) : (a.showToast({
+                0 == t.code ? (that.getOrderInfo(), that.setData(t.data)) : (that.showToast({
                     title: t.msg
                 }), getApp().core.hideLoading());
             }
         });
     },
     getOrderInfo: function() {
-        var a = this;
+        var that = this;
         getApp().request({
             url: getApp().api.bargain.activity,
             data: {
-                order_id: a.data.order_id,
+                order_id: that.data.order_id,
                 page: 1
             },
             success: function(t) {
-                0 == t.code ? (a.setData(t.data), a.setData({
-                    time_list: a.setTimeList(t.data.reset_time),
+                0 == t.code ? (that.setData(t.data), that.setData({
+                    time_list: that.setTimeList(t.data.reset_time),
                     show: !0
-                }), a.data.bargain_status && a.setData({
+                }), that.data.bargain_status && that.setData({
                     show_modal: !0
-                }), a.setTimeOver(), is_no_more = !1, a.animationCr()) : a.showToast({
+                }), that.setTimeOver(), is_no_more = !1, that.animationCr()) : that.showToast({
                     title: t.msg
                 });
             },
@@ -76,33 +79,33 @@
         };
     },
     loadData: function() {
-        var e = this;
+        var that = this;
         if (getApp().core.showLoading({
             title: "加载中"
         }), !is_loading) {
             is_loading = !0, getApp().core.showNavigationBarLoading();
-            var i = e.data.p + 1;
+            var i = that.data.p + 1;
             getApp().request({
                 url: getApp().api.bargain.activity,
                 data: {
-                    order_id: e.data.order_id,
+                    order_id: that.data.order_id,
                     page: i
                 },
                 success: function(t) {
                     if (0 == t.code) {
-                        var a = e.data.bargain_info;
-                        a = a.concat(t.data.bargain_info), e.setData({
+                        var a = that.data.bargain_info;
+                        a = a.concat(t.data.bargain_info), that.setData({
                             bargain_info: a,
                             p: i,
                             price: t.data.price,
                             money_per: t.data.money_per,
                             money_per_t: t.data.money_per_t
-                        }), 0 == t.data.bargain_info.length && (is_no_more = !0, i -= 1, e.setData({
+                        }), 0 == t.data.bargain_info.length && (is_no_more = !0, i -= 1, that.setData({
                             show_more_btn: !1,
                             show_more: !0,
                             p: i
                         }));
-                    } else e.showToast({
+                    } else that.showToast({
                         title: t.msg
                     });
                 },
@@ -157,39 +160,39 @@
         });
     },
     animationCr: function() {
-        var t = this;
-        t.animationT(), setTimeout(function() {
-            t.setData({
+        var that = this;
+        that.animationT(), setTimeout(function() {
+            that.setData({
                 show_modal_a: !0
-            }), t.animationBig(), t.animationS();
+            }), that.animationBig(), that.animationS();
         }, 800);
     },
     animationBig: function() {
-        var t = getApp().core.createAnimation({
+        var create = getApp().core.createAnimation({
             duration: 500,
             transformOrigin: "50% 50%"
-        }), a = this, e = 0;
+        }), that = this, e = 0;
         setInterval(function() {
-            e % 2 == 0 ? t.scale(.9).step() : t.scale(1).step(), a.setData({
-                animationData: t.export()
+            e % 2 == 0 ? create.scale(.9).step() : create.scale(1).step(), that.setData({
+                animationData: create.export()
             }), 500 == ++e && (e = 0);
         }, 500);
     },
     animationS: function() {
-        var t = getApp().core.createAnimation({
+        var create = getApp().core.createAnimation({
             duration: 500
         });
-        t.width("512rpx").height("264rpx").step(), t.rotate(-2).step(), t.rotate(4).step(), 
-        t.rotate(-2).step(), t.rotate(0).step(), this.setData({
-            animationDataHead: t.export()
+        create.width("512rpx").height("264rpx").step(), create.rotate(-2).step(), create.rotate(4).step(),
+            create.rotate(-2).step(), create.rotate(0).step(), this.setData({
+            animationDataHead: create.export()
         });
     },
     animationT: function() {
-        var t = getApp().core.createAnimation({
+        var create = getApp().core.createAnimation({
             duration: 200
         });
-        t.width("500rpx").height("500rpx").step(), this.setData({
-            animationDataT: t.export()
+        create.width("500rpx").height("500rpx").step(), this.setData({
+            animationDataT: create.export()
         });
     }
 });
\ No newline at end of file
Index: core/getUser.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>module.exports = function() {\n    var t = this.core.getStorageSync(this.const.USER_INFO);\n    return t || \"\";\n};
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/core/getUser.js b/core/getUser.js
--- a/core/getUser.js	
+++ b/core/getUser.js	
@@ -1,4 +1,4 @@
 module.exports = function() {
-    var t = this.core.getStorageSync(this.const.USER_INFO);
-    return t || "";
+    var userInfo = this.core.getStorageSync(this.const.USER_INFO);
+    return userInfo || "";
 };
\ No newline at end of file
Index: core/config.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>module.exports = function(e) {\n    getApp().api;\n    var t = getApp().core, g = getApp();\n    if (e && \"function\" == typeof e) {\n        var n = t.getStorageSync(g.const.STORE_CONFIG);\n        n && e(n), g.config ? n = g.config : (getApp().trigger.add(getApp().trigger.events.callConfig, \"call\", function(t) {\n            e(t);\n        }), getApp().configReadyCall && \"function\" == typeof getApp().configReadyCall || (getApp().configReadyCall = function(t) {\n            getApp().trigger.run(getApp().trigger.events.callConfig, function() {}, t);\n        }));\n    }\n};
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/core/config.js b/core/config.js
--- a/core/config.js	
+++ b/core/config.js	
@@ -1,9 +1,9 @@
 module.exports = function(e) {
     getApp().api;
-    var t = getApp().core, g = getApp();
+    var core = getApp().core, get = getApp();
     if (e && "function" == typeof e) {
-        var n = t.getStorageSync(g.const.STORE_CONFIG);
-        n && e(n), g.config ? n = g.config : (getApp().trigger.add(getApp().trigger.events.callConfig, "call", function(t) {
+        var config = core.getStorageSync(get.const.STORE_CONFIG);
+        config && e(config), get.config ? config = get.config : (getApp().trigger.add(getApp().trigger.events.callConfig, "call", function(t) {
             e(t);
         }), getApp().configReadyCall && "function" == typeof getApp().configReadyCall || (getApp().configReadyCall = function(t) {
             getApp().trigger.run(getApp().trigger.events.callConfig, function() {}, t);
Index: core/request.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>module.exports = function(a) {\n    console.log(\"a-->\",a);\n    a.data || (a.data = {});\n    var o = this.core,\n        e = this.core.getStorageSync(this.const.ACCESS_TOKEN),\n        t = this.core.getStorageSync(this.const.FORM_ID_LIST);\n        if(a.data.hideLogin && a.data.hideLogin==1){\n            e && (a.data.access_token = e), a.data._version = this._version, a.data._platform = this.platform, !this.is_login && this.page.currentPage ;\n   \n        }else{\n            e && (a.data.access_token = e), a.data._version = this._version, a.data._platform = this.platform, !this.is_login && this.page.currentPage && (this.is_login = !0, this.login({}));\n   \n        }\n     \n\n    var s = this;\n    t && 1 <= t.length && s.is_form_id_request && (s.is_form_id_request = !1, s.request({\n        url: s.api.default.form_id,\n        method: \"POST\",\n        data: {\n            formIdList: JSON.stringify(t)\n        },\n        success: function(e) {\n            s.core.removeStorageSync(s.const.FORM_ID_LIST);\n        },\n        complete: function() {\n            s.is_form_id_request = !0;\n        }\n    })), o.request({\n        url: a.url,\n        header: a.header || {\n            \"content-type\": \"application/x-www-form-urlencoded\"\n        },\n        data: a.data || {},\n        method: a.method || \"GET\",\n        dataType: a.dataType || \"json\",\n        success: function(e) {\n            -1 == e.data.code ? (s.core.hideLoading(), s.page.setUserInfoShow(), s.is_login = !1) : -2 == e.data.code ? o.redirectTo({\n                url: \"/pages/store-disabled/store-disabled\"\n            }) : a.success && a.success(e.data);\n        },\n        fail: function(e) {\n            if (console.warn(\"--- request fail >>>\"), console.warn(\"--- \" + a.url + \" ---\"), console.warn(e), console.warn(\"<<< request fail ---\"), a && a.noHandlerFail) \"function\" == typeof a.fail && a.fail(e.data);\n            else {\n                var t = getApp();\n                t.is_on_launch ? (t.is_on_launch = !1, o.showModal({\n                    title: \"网络请求出错\",\n                    content: e.errMsg || \"\",\n                    showCancel: !1,\n                    success: function(e) {\n                        e.confirm && a.fail && a.fail(e);\n                    }\n                })) : (o.showToast({\n                    title: e.errMsg,\n                    image: \"/images/icon-warning.png\"\n                }), a.fail && a.fail(e));\n            }\n        },\n        complete: function(t) {\n            if (200 != t.statusCode && t.data && t.data.code && 500 == t.data.code) {\n                var e = t.data.data.message;\n                o.showModal({\n                    title: \"系统错误\",\n                    content: e + \";\\r\\n请将错误内容复制发送给我们，以便进行问题追踪。\",\n                    cancelText: \"关闭\",\n                    confirmText: \"复制\",\n                    success: function(e) {\n                        e.confirm && o.setClipboardData({\n                            data: JSON.stringify({\n                                data: t.data.data,\n                                object: a\n                            })\n                        });\n                    }\n                });\n            }\n            a.complete && a.complete(t);\n        }\n    });\n};
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/core/request.js b/core/request.js
--- a/core/request.js	
+++ b/core/request.js	
@@ -1,5 +1,4 @@
 module.exports = function(a) {
-    console.log("a-->",a);
     a.data || (a.data = {});
     var o = this.core,
         e = this.core.getStorageSync(this.const.ACCESS_TOKEN),
Index: core/login.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>module.exports = function(e) {\n\tconsole.log(\"2222-->\",e);\n    var t = this, r = t.page.currentPage;\n    t.page.currentPageOptions;\n    r && \"pages/index/index\" === r.route && \"my\" === t.platform || this.request({\n        url: this.api.share.index,\n        success: function(e) {\n            0 == e.code && (t.page.setPhone(), t.trigger.run(t.trigger.events.login));\n        }\n    });\n};
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/core/login.js b/core/login.js
--- a/core/login.js	
+++ b/core/login.js	
@@ -1,11 +1,10 @@
 module.exports = function(e) {
-	console.log("2222-->",e);
-    var t = this, r = t.page.currentPage;
-    t.page.currentPageOptions;
-    r && "pages/index/index" === r.route && "my" === t.platform || this.request({
+    var that = this, route = that.page.currentPage;
+    that.page.currentPageOptions;
+    route && "pages/index/index" === route.route && "my" === that.platform || this.request({
         url: this.api.share.index,
         success: function(e) {
-            0 == e.code && (t.page.setPhone(), t.trigger.run(t.trigger.events.login));
+            0 == e.code && (that.page.setPhone(), that.trigger.run(that.trigger.events.login));
         }
     });
 };
\ No newline at end of file
Index: core/page.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>module.exports = {\n    currentPage: null,\n    currentPageOptions: {},\n    navbarPages: [\n        \"pages/index/index\",\n        \"pages/cat/cat\",\n        \"pages/cart/cart\",\n        \"pages/user/user\",\n        \"pages/list/list\",\n        \"pages/search/search\",\n        \"pages/topic-list/topic-list\",\n        \"pages/video/video-list\",\n        \"pages/miaosha/miaosha\",\n        \"pages/shop/shop\",\n        \"pages/pt/index/index\",\n        \"pages/book/index/index\",\n        \"pages/share/index\",\n        \"pages/quick-purchase/index/index\",\n        \"mch/m/myshop/myshop\",\n        \"mch/shop-list/shop-list\",\n        \"pages/integral-mall/index/index\",\n        \"pages/integral-mall/register/index\",\n        \"pages/article-detail/article-detail\",\n        \"pages/article-list/article-list\",\n        \"pages/order/order\",\n        \"pages/set-pwd/set-pwd\"\n    ],\n    onLoad: function (t, e) {\n        this.currentPage = t, this.currentPageOptions = e;\n        var o = this;\n        if (this.setUserInfo(), this.setWxappImg(), this.setStore(), this.setParentId(e),\n            this.getNavigationBarColor(), this.setDeviceInfo(), this.setPageClasses(), this.setPageNavbar(),\n            this.setBarTitle(), \"function\" == typeof t.onSelfLoad && t.onSelfLoad(e), o._setFormIdSubmit(),\n        \"undefined\" != typeof my && \"pages/login/login\" != t.route && e && (t.options || (t.options = e),\n            getApp().core.setStorageSync(\"last_page_options\", e)), \"lottery/goods/goods\" == t.route && e) {\n            if (e.user_id) var n = e.user_id, a = e.id; else if (e.scene && isNaN(e.scene)) {\n                var i = decodeURIComponent(e.scene);\n                if (i && (i = getApp().helper.scene_decode(i)) && i.uid) n = i.uid, a = i.gid;\n            }\n            getApp().request({\n                data: {\n                    user_id: n,\n                    lottery_id: a\n                },\n                url: getApp().api.lottery.clerk,\n                success: function (e) {\n                    e.code;\n                }\n            });\n        }\n        t.navigatorClick = function (e) {\n            o.navigatorClick(e, t);\n        }, t.setData({\n            __platform: getApp().platform\n        }), void 0 === t.showToast && (t.showToast = function (e) {\n            o.showToast(e);\n        }), getApp().shareSendCoupon = function (e) {\n            o.shareSendCoupon(e);\n        }, void 0 === t.setTimeList && (t.setTimeList = function (e) {\n            return o.setTimeList(e);\n        }), void 0 === t.showLoading && (t.showLoading = function (e) {\n            o.showLoading(e);\n        }), void 0 === t.hideLoading && (t.hideLoading = function (e) {\n            o.hideLoading(e);\n        }), void 0 === t.modalConfirm && (t.modalConfirm = function (e) {\n            o.modalConfirm(e);\n        }), void 0 === t.modalClose && (t.modalClose = function (e) {\n            o.modalClose(e);\n        }), void 0 === t.modalShow && (t.modalShow = function (e) {\n            o.modalShow(e);\n        }), void 0 === t.myLogin && (t.myLogin = function () {\n            o.myLogin();\n        }), void 0 === t.getUserInfo && (t.getUserInfo = function (e) {\n            o.getUserInfo(e);\n        }), void 0 === t.getPhoneNumber && (t.getPhoneNumber = function (e) {\n            o.getPhoneNumber(e);\n        }), void 0 === t.bindParent && (t.bindParent = function (e) {\n            o.bindParent(e);\n        }), void 0 === t.closeCouponBox && (t.closeCouponBox = function (e) {\n            o.closeCouponBox(e);\n        }), void 0 === t.relevanceSuccess && (t.relevanceSuccess = function (e) {\n            o.relevanceSuccess(e);\n        }), void 0 === t.relevanceError && (t.relevanceError = function (e) {\n            o.relevanceError(e);\n        }), void 0 === t.setUserInfoShowFalse && (t.setUserInfoShowFalse = function () {\n            o.setUserInfoShowFalse();\n        });\n\n    },\n    onReady: function (e) {\n        this.currentPage = e;\n    },\n    onShow: function (e) {\n        this.currentPage = e, getApp().orderPay.init(e, getApp()), require(\"../components/quick-navigation/quick-navigation.js\").init(this.currentPage);\n    },\n    onHide: function (e) {\n        this.currentPage = e;\n    },\n    onUnload: function (e) {\n        this.currentPage = e;\n    },\n    onPullDownRefresh: function (e) {\n        this.currentPage = e;\n    },\n    onReachBottom: function (e) {\n        this.currentPage = e;\n    },\n    onShareAppMessage: function (e) {\n        this.currentPage = e, setTimeout(function () {\n            getApp().shareSendCoupon(e);\n        }, 1e3);\n    },\n    imageClick: function (e) {\n        console.log(\"image click\", e);\n    },\n    textClick: function (e) {\n        console.log(\"text click\", e);\n    },\n    tap1: function (e) {\n        console.log(\"tap1\", e);\n    },\n    tap2: function (e) {\n        console.log(\"tap2\", e);\n    },\n    formSubmit_collect: function (e) {\n        e.detail.formId;\n        console.log(\"formSubmit_collect--\\x3e\", e);\n    },\n    setUserInfo: function () {\n        var e = this.currentPage, t = getApp().getUser();\n        t && e.setData({\n            __user_info: t\n        });\n    },\n    setWxappImg: function (e) {\n        var t = this.currentPage;\n        getApp().getConfig(function (e) {\n            t.setData({\n                __wxapp_img: e.wxapp_img,\n                store: e.store\n            });\n        });\n    },\n    setStore: function (e) {\n        var t = this.currentPage;\n        getApp().getConfig(function (e) {\n            e.store && t.setData({\n                store: e.store,\n                __is_comment: e.store ? e.store.is_comment : 1,\n                __is_sales: e.store ? e.store.is_sales : 1,\n                __is_member_price: e.store ? e.store.is_member_price : 1,\n                __is_share_price: e.store ? e.store.is_share_price : 1,\n                __alipay_mp_config: e.alipay_mp_config\n            });\n        });\n    },\n    setParentId: function (e) {\n        var t = this.currentPage;\n        if (\"/pages/index/index\" == t.route && this.setOfficalAccount(), e) {\n            var o = 0;\n            if (e.user_id) o = e.user_id; else if (e.scene) {\n                if (isNaN(e.scene)) {\n                    var n = decodeURIComponent(e.scene);\n                    n && (n = getApp().helper.scene_decode(n)) && n.uid && (o = n.uid);\n                } else -1 == t.route.indexOf(\"clerk\") && (o = e.scene);\n                this.setOfficalAccount();\n            } else if (null !== getApp().query) {\n                var a = getApp().query;\n                o = a.uid;\n            }\n            o && void 0 !== o && (getApp().core.setStorageSync(getApp().const.PARENT_ID, o),\n                getApp().trigger.remove(getApp().trigger.events.login, \"TRY_TO_BIND_PARENT\"), getApp().trigger.add(getApp().trigger.events.login, \"TRY_TO_BIND_PARENT\", function () {\n                t.bindParent({\n                    parent_id: o,\n                    condition: 0\n                });\n            }));\n        }\n    },\n    showToast: function (e) {\n        var t = this.currentPage, o = e.duration || 2500, n = e.title || \"\", a = (e.success,\n            e.fail, e.complete || null);\n        t._toast_timer && clearTimeout(t._toast_timer), t.setData({\n            _toast: {\n                title: n\n            }\n        }), t._toast_timer = setTimeout(function () {\n            var e = t.data._toast;\n            e.hide = !0, t.setData({\n                _toast: e\n            }), \"function\" == typeof a && a();\n        }, o);\n    },\n    setDeviceInfo: function () {\n        var e = this.currentPage, t = [{\n            id: \"device_iphone_5\",\n            model: \"iPhone 5\"\n        }, {\n            id: \"device_iphone_x\",\n            model: \"iPhone X\"\n        }], o = getApp().core.getSystemInfoSync();\n        if (o.model) for (var n in 0 <= o.model.indexOf(\"iPhone X\") && (o.model = \"iPhone X\"),\n            t) t[n].model == o.model && e.setData({\n            __device: t[n].id\n        });\n    },\n    setPageNavbar: function () {\n        var t = this, r = this.currentPage, e = getApp().core.getStorageSync(\"_navbar\");\n        e && a(e);\n        var o = !1;\n        for (var n in t.navbarPages) if (r.route == t.navbarPages[n]) {\n            o = !0;\n            break;\n        }\n\n        function a(e) {\n            var t = !1;\n            for (var o in e.navs) {\n                var n = e.navs[o].url, a = r.route || r.__route__ || null;\n                for (var i in n = e.navs[o].new_url, r.options) getApp().helper.inArray(i, [\"scene\", \"user_id\", \"uid\"]) || (-1 == a.indexOf(\"?\") ? a += \"?\" : a += \"&\",\n                    a += i + \"=\" + r.options[i]);\n                console.log(a), console.log(n), n === \"/\" + a ? t = e.navs[o].active = !0 : e.navs[o].active = !1;\n            }\n            t && r.setData({\n                _navbar: e\n            });\n        }\n\n        o && getApp().request({\n            data: {hideLogin: 1},\n            url: getApp().api.default.navbar,\n            success: function (e) {\n                0 == e.code && (a(e.data), getApp().core.setStorageSync(\"_navbar\", e.data), t.setPageClasses());\n            }\n        });\n    },\n    setPageClasses: function () {\n        var e = this.currentPage, t = e.data.__device;\n        e.data._navbar && e.data._navbar.navs && 0 < e.data._navbar.navs.length && (t += \" show_navbar\"),\n        t && e.setData({\n            __page_classes: t\n        });\n    },\n    showLoading: function (e) {\n        var t = t;\n        t.setData({\n            _loading: !0\n        });\n    },\n    hideLoading: function (e) {\n        this.currentPage.setData({\n            _loading: !1\n        });\n    },\n    setTimeList: function (e) {\n        function t(e) {\n            return e <= 0 && (e = 0), e < 10 ? \"0\" + e : e;\n        }\n        var o = \"00\", n = \"00\", a = \"00\", i = 0, r = \"\", s = \"\", c = \"\";\n        if (86400 <= e && (i = parseInt(e / 86400), e %= 86400, r += i + \"天\", s += i + \"天\",\n            c += i + \"天\"), e < 86400) {\n            var p = parseInt(e / 3600);\n            e %= 3600, r += (a = t(p)) + \"小时\", s += a + \":\", c = 0 < i || 0 < p ? c + a + \":\" : \"\";\n        }\n        return e < 3600 && (n = t(parseInt(e / 60)), e %= 60, r += n + \"分\", s += n + \":\",\n            c += n + \":\"), e < 60 && (r += (o = t(e)) + \"秒\", s += o, c += o), {\n            d: i,\n            h: a,\n            m: n,\n            s: o,\n            content: r,\n            content_1: s,\n            content_ms: c\n        };\n    },\n    setBarTitle: function (e) {\n        var t = this.currentPage.route, o = getApp().core.getStorageSync(getApp().const.WX_BAR_TITLE);\n        for (var n in o) o[n].url === t && getApp().core.setNavigationBarTitle({\n            title: o[n].title\n        });\n    },\n    getNavigationBarColor: function () {\n        var t = getApp(), o = this;\n        t.request({\n            data: {hideLogin: 1},\n            url: t.api.default.navigation_bar_color,\n            success: function (e) {\n                0 == e.code && (t.core.setStorageSync(getApp().const.NAVIGATION_BAR_COLOR, e.data),\n                    o.setNavigationBarColor(), t.navigateBarColorCall && \"function\" == typeof t.navigateBarColorCall && t.navigateBarColorCall(e));\n            }\n        });\n    },\n    setNavigationBarColor: function () {\n        var t = this.currentPage, e = getApp().core.getStorageSync(getApp().const.NAVIGATION_BAR_COLOR);\n        e && (getApp().core.setNavigationBarColor(e), t.setData({\n            _navigation_bar_color: e\n        })), getApp().navigateBarColorCall = function (e) {\n            getApp().core.setNavigationBarColor(e.data), t.setData({\n                _navigation_bar_color: e.data\n            });\n        };\n    },\n    navigatorClick: function (e, t) {\n        var o = e.currentTarget.dataset.open_type;\n        if (\"redirect\" == o) return !0;\n        if (\"wxapp\" != o) {\n            if (\"tel\" == o) {\n                var n = e.currentTarget.dataset.tel;\n                getApp().core.makePhoneCall({\n                    phoneNumber: n\n                });\n            }\n            return !1;\n        }\n    },\n    shareSendCoupon: function (o) {\n        var n = getApp();\n        n.core.showLoading({\n            mask: !0\n        }), o.hideGetCoupon || (o.hideGetCoupon = function (e) {\n            var t = e.currentTarget.dataset.url || !1;\n            o.setData({\n                get_coupon_list: null\n            }), t && n.core.navigateTo({\n                url: t\n            });\n        }), n.request({\n            url: n.api.coupon.share_send,\n            success: function (e) {\n                0 == e.code && o.setData({\n                    get_coupon_list: e.data.list\n                });\n            },\n            complete: function () {\n                n.core.hideLoading();\n            }\n        });\n    },\n    bindParent: function (e) {\n        var t = getApp();\n        if (\"undefined\" != e.parent_id && 0 != e.parent_id) {\n            var o = t.getUser();\n            if (0 < t.core.getStorageSync(t.const.SHARE_SETTING).level) 0 != e.parent_id && t.request({\n                url: t.api.share.bind_parent,\n                data: {\n                    parent_id: e.parent_id,\n                    condition: e.condition\n                },\n                success: function (e) {\n                    0 == e.code && (o.parent = e.data, t.setUser(o));\n                }\n            });\n        }\n    },\n    _setFormIdSubmit: function (e) {\n        var g = this.currentPage;\n        g._formIdSubmit || (g._formIdSubmit = function (e) {\n            var t = e.currentTarget.dataset, o = e.detail.formId, n = t.bind || null, a = t.type || null,\n                i = t.url || null, r = t.appId || null, s = getApp().core.getStorageSync(getApp().const.FORM_ID_LIST);\n            s && s.length || (s = []);\n            var c = [];\n            for (var p in s) c.push(s[p].form_id);\n            switch (console.log(\"form_id\"), \"the formId is a mock one\" === o || getApp().helper.inArray(o, c) || (s.push({\n                time: getApp().helper.time(),\n                form_id: o\n            }), getApp().core.setStorageSync(getApp().const.FORM_ID_LIST, s)), g[n] && \"function\" == typeof g[n] && g[n](e),\n                a) {\n                case \"navigate\":\n                    i && getApp().core.navigateTo({\n                        url: i\n                    });\n                    break;\n\n                case \"redirect\":\n                    i && getApp().core.redirectTo({\n                        url: i\n                    });\n                    break;\n\n                case \"switchTab\":\n                    i && getApp().core.switchTab({\n                        url: i\n                    });\n                    break;\n\n                case \"reLaunch\":\n                    i && getApp().core.reLaunch({\n                        url: i\n                    });\n                    break;\n\n                case \"navigateBack\":\n                    i && getApp().core.navigateBack({\n                        url: i\n                    });\n                    break;\n\n                case \"wxapp\":\n                    r && getApp().core.navigateToMiniProgram({\n                        url: i,\n                        appId: r,\n                        path: t.path || \"\"\n                    });\n            }\n        });\n    },\n    modalClose: function (e) {\n        this.currentPage.setData({\n            modal_show: !1\n        }), console.log(\"你点击了关闭按钮\");\n    },\n    modalConfirm: function (e) {\n        this.currentPage.setData({\n            modal_show: !1\n        }), console.log(\"你点击了确定按钮\");\n    },\n    modalShow: function (e) {\n        this.currentPage.setData({\n            modal_show: !0\n        }), console.log(\"点击会弹出弹框\");\n    },\n    getUserInfo: function (o) {\n        var n = this;\n        \"getUserInfo:ok\" == o.detail.errMsg && getApp().core.login({\n            success: function (e) {\n                var t = e.code;\n                n.unionLogin({\n                    code: t,\n                    user_info: o.detail.rawData,\n                    encrypted_data: o.detail.encryptedData,\n                    iv: o.detail.iv,\n                    signature: o.detail.signature\n                });\n            },\n            fail: function (e) {\n            }\n        });\n    },\n    myLogin: function () {\n\n        console.log(411);\n\n        var t = this;\n        \"my\" === getApp().platform && (console.log(getApp().login_complete), getApp().login_complete || (getApp().login_complete = !0,\n            my.getAuthCode({\n                scopes: \"auth_user\",\n                success: function (e) {\n                    t.unionLogin({\n                        code: e.authCode\n                    });\n                },\n                fail: function (e) {\n                    getApp().login_complete = !1, getApp().core.redirectTo({\n                        url: \"/pages/index/index\"\n                    });\n                }\n            })));\n    },\n    unionLogin: function (e) {\n        var o = this.currentPage, n = this;\n        getApp().core.showLoading({\n            title: \"正在登录\",\n            mask: !0\n        }), getApp().request({\n            url: getApp().api.passport.login,\n            method: \"POST\",\n            data: e,\n            success: function (e) {\n                if (0 == e.code) {\n                    o.setData({\n                        __user_info: e.data\n                    }), getApp().setUser(e.data), getApp().core.setStorageSync(getApp().const.ACCESS_TOKEN, e.data.access_token),\n                        getApp().trigger.run(getApp().trigger.events.login);\n                    var t = getApp().core.getStorageSync(getApp().const.STORE);\n                    e.data.binding || !t.option.phone_auth || t.option.phone_auth && 0 == t.option.phone_auth ? n.loadRoute() : (\"undefined\" == typeof wx && n.loadRoute(),\n                        n.setPhone()), n.setUserInfoShowFalse();\n                } else getApp().login_complete = !1, getApp().core.showModal({\n                    title: \"提示\",\n                    content: e.msg,\n                    showCancel: !1\n                });\n            },\n            fail: function () {\n                getApp().login_complete = !1;\n            },\n            complete: function () {\n                getApp().core.hideLoading();\n            }\n        });\n    },\n    getPhoneNumber: function (o) {\n        var n = this.currentPage, a = this;\n        \"getPhoneNumber:fail user deny\" == o.detail.errMsg ? getApp().core.showModal({\n            title: \"提示\",\n            showCancel: !1,\n            content: \"未授权\"\n        }) : (getApp().core.showLoading({\n            title: \"授权中\"\n        }), getApp().core.login({\n            success: function (e) {\n                if (e.code) {\n                    var t = e.code;\n                    getApp().request({\n                        url: getApp().api.user.user_binding,\n                        method: \"POST\",\n                        data: {\n                            iv: o.detail.iv,\n                            encryptedData: o.detail.encryptedData,\n                            code: t\n                        },\n                        success: function (e) {\n                            if (0 == e.code) {\n                                var t = n.data.__user_info;\n                                t.binding = e.data.dataObj, getApp().setUser(t), n.setData({\n                                    PhoneNumber: e.data.dataObj,\n                                    __user_info: t,\n                                    binding: !0,\n                                    binding_num: e.data.dataObj\n                                }), a.loadRoute();\n                            } else getApp().core.showToast({\n                                title: \"授权失败,请重试\"\n                            });\n                        },\n                        complete: function (e) {\n                            getApp().core.hideLoading();\n                        }\n                    });\n                } else getApp().core.showToast({\n                    title: \"获取用户登录态失败！\" + e.errMsg\n                });\n            }\n        }));\n    },\n    setUserInfoShow: function () {\n        var e = this.currentPage;\n        \"wx\" == getApp().platform ? e.setData({\n            user_info_show: !0\n        }) : this.myLogin();\n    },\n    setPhone: function () {\n        var e = this.currentPage;\n        \"undefined\" == typeof my && e.setData({\n            user_bind_show: !0\n        });\n    },\n    setUserInfoShowFalse: function () {\n        this.currentPage.setData({\n            user_info_show: !1\n        });\n    },\n    closeCouponBox: function (e) {\n        this.currentPage.setData({\n            get_coupon_list: \"\"\n        });\n    },\n    relevanceSuccess: function (e) {\n        console.log(e);\n    },\n    relevanceError: function (e) {\n        console.log(e);\n    },\n    setOfficalAccount: function (e) {\n        this.currentPage.setData({\n            __is_offical_account: !0\n        });\n    },\n    loadRoute: function () {\n        var e = this.currentPage;\n        \"pages/index/index\" == e.route || getApp().core.redirectTo({\n            url: \"/\" + e.route + \"?\" + getApp().helper.objectToUrlParams(e.options)\n        }), this.setUserInfoShowFalse();\n    }\n};
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/core/page.js b/core/page.js
--- a/core/page.js	
+++ b/core/page.js	
@@ -219,7 +219,7 @@
                 var n = e.navs[o].url, a = r.route || r.__route__ || null;
                 for (var i in n = e.navs[o].new_url, r.options) getApp().helper.inArray(i, ["scene", "user_id", "uid"]) || (-1 == a.indexOf("?") ? a += "?" : a += "&",
                     a += i + "=" + r.options[i]);
-                console.log(a), console.log(n), n === "/" + a ? t = e.navs[o].active = !0 : e.navs[o].active = !1;
+                n === "/" + a ? t = e.navs[o].active = !0 : e.navs[o].active = !1;
             }
             t && r.setData({
                 _navbar: e
@@ -256,6 +256,7 @@
         function t(e) {
             return e <= 0 && (e = 0), e < 10 ? "0" + e : e;
         }
+
         var o = "00", n = "00", a = "00", i = 0, r = "", s = "", c = "";
         if (86400 <= e && (i = parseInt(e / 86400), e %= 86400, r += i + "天", s += i + "天",
             c += i + "天"), e < 86400) {
Index: core/order-pay.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>var app = getApp();\nvar deliver_template = '_XyGBjtCXpWQgSdZ5lEBa03UCa5vMuc2PJkmUVeXufU' //发货模板id\nvar order_template = '9_o1f7zU4g42YEIl-8jjkc7qFciP7UWr_qByz5L4S5s'  //下单模板id\nvar pt_template = 'B9lA_l-HCzFWDToCzRmnRkxrVSDBhE2cl144Ohc6gjk'     //拼团发起模板id\n\nfunction setOnShowScene(e) {\n    app.onShowData || (app.onShowData = {}), app.onShowData.scene = e;\n}\n\nvar pay = {\n\n    init: function (l, e) {\n        var that = this, A = getApp().api;\n        that.page = l, app = e;\n        var m = getApp().core.getStorageSync(getApp().const.PARENT_ID);\n        m || (m = 0), that.page.orderPay = function (e) {\n            var t = e.currentTarget.dataset.index, o = that.page.data.order_list[t], a = new Array();\n            if (void 0 !== that.page.data.pay_type_list) a = that.page.data.pay_type_list; else if (void 0 !== o.pay_type_list) a = o.pay_type_list; else if (void 0 !== o.goods_list[0].pay_type_list) a = o.goods_list[0].pay_type_list; else {\n                var r = {\n                    payment: 0\n                };\n                a.push(r);\n            }\n            var p = getCurrentPages(), s = p[p.length - 1].route, n = {};\n            if (-1 != s.indexOf(\"pt\")) c = A.group.pay_data, n.order_id = o.order_id; else if (-1 != s.indexOf(\"miaosha\")) c = A.miaosha.pay_data,\n                n.order_id = o.order_id; else if (-1 != s.indexOf(\"book\")) c = A.book.order_pay,\n                n.id = o.id; else {\n                var c = A.order.pay_data;\n                n.order_id = o.order_id;\n            }\n\n            function i(e, t, o) {\n                e.pay_type = \"WECHAT_PAY\", app.request({\n                    url: t,\n                    data: e,\n                    complete: function () {\n                        getApp().core.hideLoading();\n                    },\n                    success: function (e) {\n                        0 == e.code && (setOnShowScene(\"pay\"), getApp().core.requestPayment({\n                            _res: e,\n                            timeStamp: e.data.timeStamp,\n                            nonceStr: e.data.nonceStr,\n                            package: e.data.package,\n                            signType: e.data.signType,\n                            paySign: e.data.paySign,\n                            success: function (e) {\n                            },\n                            fail: function (e) {\n                            },\n                            complete: function (e) {\n                                \"requestPayment:fail\" != e.errMsg && \"requestPayment:fail cancel\" != e.errMsg ? getApp().core.redirectTo({\n                                    url: \"/\" + o + \"?status=1\"\n                                }) : getApp().core.showModal({\n                                    title: \"提示\",\n                                    content: \"订单尚未支付\",\n                                    showCancel: !1,\n                                    confirmText: \"确认\",\n                                    success: function (e) {\n                                        e.confirm && getApp().core.redirectTo({\n                                            url: \"/\" + o + \"?status=0\"\n                                        });\n                                    }\n                                });\n                            }\n                        })), 1 == e.code && getApp().core.showToast({\n                            title: e.msg,\n                            image: \"/images/icon-warning.png\"\n                        });\n                    }\n                });\n            }\n\n            function d(t, o, a) {\n                t.pay_type = \"BALANCE_PAY\";\n                var e = getApp().getUser();\n                getApp().core.showModal({\n                    title: \"当前账户余额：\" + e.money,\n                    content: \"是否使用余额\",\n                    success: function (e) {\n                        e.confirm && (getApp().core.showLoading({\n                            title: \"正在提交\",\n                            mask: !0\n                        }), app.request({\n                            url: o,\n                            data: t,\n                            complete: function () {\n                                getApp().core.hideLoading();\n                            },\n                            success: function (e) {\n                                0 == e.code && getApp().core.redirectTo({\n                                    url: \"/\" + a + \"?status=1\"\n                                }), 1 == e.code && getApp().core.showModal({\n                                    title: \"提示\",\n                                    content: e.msg,\n                                    showCancel: !1\n                                });\n                            }\n                        }));\n                    }\n                });\n            }\n\n            n.parent_id = m, n.condition = 2, 1 == a.length ? (getApp().core.showLoading({\n                title: \"正在提交\",\n                mask: !0\n            }), 0 == a[0].payment && i(n, c, s), 3 == a[0].payment && d(n, c, s)) : getApp().core.showModal({\n                title: \"提示\",\n                content: \"选择支付方式\",\n                cancelText: \"余额支付\",\n                confirmText: \"线上支付\",\n                success: function (e) {\n                    e.confirm ? (getApp().core.showLoading({\n                        title: \"正在提交\",\n                        mask: !0\n                    }), i(n, c, s)) : e.cancel && d(n, c, s);\n                }\n            });\n        }, that.page.order_submit = function (order_list, g) {\n            var e = A.order.submit, p = A.order.pay_data, u = \"/pages/order/order\";\n            if (\"pt\" == g ? (e = A.group.submit, p = A.group.pay_data, u = \"/pages/pt/order/order\") : \"ms\" == g ? (e = A.miaosha.submit,\n                p = A.miaosha.pay_data, u = \"/pages/miaosha/order/order\") : \"pond\" == g ? (e = A.pond.submit,\n                p = A.order.pay_data, u = \"/pages/order/order\") : \"scratch\" == g ? (e = A.scratch.submit,\n                p = A.order.pay_data, u = \"/pages/order/order\") : \"lottery\" == g ? (e = A.lottery.submit,\n                p = A.order.pay_data, u = \"/pages/order/order\") : \"step\" == g ? (e = A.step.submit,\n                p = A.order.pay_data, u = \"/pages/order/order\") : \"s\" == g && (e = A.order.new_submit,\n                p = A.order.pay_data, u = \"/pages/order/order\"), 3 == order_list.payment) {\n                let password = \"123123\";\n                var userinfo = getApp().getUser();\n                console.log(order_list)\n                // if (order_list.password == password) {\n                //     o();\n                // } else if (order_list.password == null || order_list.password == '') {\n                //     return\n                // } else if (order_list.password != password) {\n                //     return wx.showToast({\n                //         icon: \"none\",\n                //         title: '密码错误,请重新输入'\n                //     })\n                // }\n                //使用余额支付\n                getApp().core.showModal({\n                    title: \"当前账户余额：\" + userinfo.money,\n                    content: \"是否确定使用余额支付\",\n                    success: function (e) {\n                        console.log(e)\n                        e.confirm && o();\n                    }\n                });\n            } else o();\n\n            function o() {\n                getApp().core.showLoading({\n                    title: \"正在提交\",\n                    mask: !0\n                }), app.request({\n                    url: e,\n                    method: \"post\",\n                    data: order_list,\n                    success: function (e) {\n                        if (0 == e.code) {\n                            var t = function () {\n                                app.request({\n                                    url: p,\n                                    data: {\n                                        order_id: d,\n                                        order_id_list: o,\n                                        pay_type: a,\n                                        form_id: order_list.formId,\n                                        parent_user_id: m,\n                                        condition: 2\n                                    },\n                                    success: function (e) {\n                                        wx.requestSubscribeMessage({\n                                            tmplIds: [deliver_template, order_template, pt_template],\n                                            success(res) {\n                                                console.log(res)\n                                                console.log('成功')\n                                            },\n                                            fail(err) {\n                                                console.log(err)\n                                                console.log('失败')\n                                            }\n                                        })\n                                        if (0 != e.code) return getApp().core.hideLoading(), void getApp().core.showModal({\n                                            title: \"提示\",\n                                            content: e.msg,\n                                            showCancel: !1,\n                                            confirmText: \"确认\",\n                                            success: function (e) {\n                                                e.confirm && getApp().core.redirectTo({\n                                                    url: u + \"?status=0\",\n                                                });\n                                            }\n                                        });\n                                        setTimeout(function () {\n                                            getApp().core.hideLoading();\n                                        }, 1e3), \"pt\" == g ? \"ONLY_BUY\" == that.page.data.type ? getApp().core.redirectTo({\n                                            url: u + \"?status=2\"\n                                        }) : getApp().core.redirectTo({\n                                            url: \"/pages/pt/group/details?oid=\" + d\n                                        }) : void 0 !== that.page.data.goods_card_list && 0 < that.page.data.goods_card_list.length && 2 != order_list.payment ? that.page.setData({\n                                            show_card: !0\n                                        }) : getApp().core.redirectTo({\n                                            url: u + \"?status=-1\",\n                                        });\n                                    }\n                                });\n                            };\n                            if (getApp().page.bindParent({\n                                parent_id: m,\n                                condition: 1\n                            }), null != e.data.p_price && 0 === e.data.p_price) return \"step\" == g ? getApp().core.showToast({\n                                title: \"兑换成功\"\n                            }) : getApp().core.showToast({\n                                title: \"提交成功\"\n                            }), void setTimeout(function () {\n                                getApp().core.redirectTo({\n                                    url: \"/pages/order/order?status=1\"\n                                });\n                            }, 2e3);\n                            setTimeout(function () {\n                                that.page.setData({\n                                    options: {}\n                                });\n                            }, 1);\n                            var d = e.data.order_id || \"\",\n                                o = e.data.order_id_list ? JSON.stringify(e.data.order_id_list) : \"\", a = \"\";\n                            0 == order_list.payment ? app.request({\n                                url: p,\n                                data: {\n                                    order_id: d,\n                                    order_id_list: o,\n                                    pay_type: \"WECHAT_PAY\",\n                                    parent_user_id: m,\n                                    condition: 2\n                                },\n                                success: function (e) {\n                                    if (0 != e.code) {\n                                        if (1 == e.code) return getApp().core.hideLoading(), void getApp().core.showToast({\n                                            title: e.msg,\n                                            image: \"/images/icon-warning.png\"\n                                        });\n                                    } else {\n                                        setTimeout(function () {\n                                            getApp().core.hideLoading();\n                                        }, 1e3), setOnShowScene(\"pay\"), e.data && 0 == e.data.price ? void 0 !== that.page.data.goods_card_list && 0 < that.page.data.goods_card_list.length ? that.page.setData({\n                                            show_card: !0\n                                        }) : getApp().core.redirectTo({\n                                            url: u + \"?status=1\"\n                                        }) : getApp().core.requestPayment({\n                                            _res: e,\n                                            timeStamp: e.data.timeStamp,\n                                            nonceStr: e.data.nonceStr,\n                                            package: e.data.package,\n                                            signType: e.data.signType,\n                                            paySign: e.data.paySign,\n                                            success: function (e) {\n                                            },\n                                            fail: function (e) {\n                                            },\n                                            complete: function (e) {\n                                                \"requestPayment:fail\" != e.errMsg && \"requestPayment:fail cancel\" != e.errMsg ? \"requestPayment:ok\" != e.errMsg || (void 0 !== _.page.data.goods_card_list && 0 < _.page.data.goods_card_list.length ? _.page.setData({\n                                                    show_card: !0\n                                                }) : \"pt\" == g ? \"ONLY_BUY\" == _.page.data.type ? getApp().core.redirectTo({\n                                                    url: u + \"?status=2\"\n                                                }) : getApp().core.redirectTo({\n                                                    url: \"/pages/pt/group/details?oid=\" + d\n                                                }) : getApp().core.redirectTo({\n                                                    url: u + \"?status=1\"\n                                                })) : getApp().core.showModal({\n                                                    title: \"提示\",\n                                                    content: \"订单尚未支付\",\n                                                    showCancel: !1,\n                                                    confirmText: \"确认\",\n                                                    success: function (e) {\n                                                        e.confirm && getApp().core.redirectTo({\n                                                            url: u + \"?status=0\"\n                                                        });\n                                                    }\n                                                });\n                                            }\n                                        });\n                                        var t = getApp().core.getStorageSync(getApp().const.QUICK_LIST);\n                                        if (t) {\n                                            for (var o = t.length, a = 0; a < o; a++) for (var r = t[a].goods, p = r.length, s = 0; s < p; s++) r[s].num = 0;\n                                            getApp().core.setStorageSync(getApp().const.QUICK_LISTS, t);\n                                            var n = getApp().core.getStorageSync(getApp().const.CARGOODS);\n                                            for (o = n.length, a = 0; a < o; a++) n[a].num = 0, n[a].goods_price = 0, l.setData({\n                                                carGoods: n\n                                            });\n                                            getApp().core.setStorageSync(getApp().const.CARGOODS, n);\n                                            var c = getApp().core.getStorageSync(getApp().const.TOTAL);\n                                            c && (c.total_num = 0, c.total_price = 0, getApp().core.setStorageSync(getApp().const.TOTAL, c));\n                                            getApp().core.getStorageSync(getApp().const.CHECK_NUM);\n                                            0, getApp().core.setStorageSync(getApp().const.CHECK_NUM, 0);\n                                            var i = getApp().core.getStorageSync(getApp().const.QUICK_HOT_GOODS_LISTS);\n                                            for (o = i.length, a = 0; a < o; a++) i[a].num = 0, l.setData({\n                                                quick_hot_goods_lists: i\n                                            });\n                                            getApp().core.setStorageSync(getApp().const.QUICK_HOT_GOODS_LISTS, i);\n                                        }\n                                    }\n                                }\n                            }) : 2 == order_list.payment ? (a = \"HUODAO_PAY\", t()) : 3 == order_list.payment && (a = \"BALANCE_PAY\",\n                                t());\n                        }\n                        1 == e.code && (getApp().core.hideLoading(), \"活力币不足\" == e.msg && that.page.data.store.option.step.currency_name ? getApp().core.showToast({\n                            icon: \"none\",\n                            title: that.page.data.store.option.step.currency_name + \"不足\"\n                        }) : getApp().core.showToast({\n                            icon: \"none\",\n                            title: e.msg\n                        }));\n                    }\n                });\n            }\n        };\n    }\n};\n\nmodule.exports = pay;
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/core/order-pay.js b/core/order-pay.js
--- a/core/order-pay.js	
+++ b/core/order-pay.js	
@@ -8,49 +8,50 @@
 }
 
 var pay = {
-
     init: function (l, e) {
-        var that = this, A = getApp().api;
+        var that = this, Api = getApp().api;
         that.page = l, app = e;
-        var m = getApp().core.getStorageSync(getApp().const.PARENT_ID);
-        m || (m = 0), that.page.orderPay = function (e) {
-            var t = e.currentTarget.dataset.index, o = that.page.data.order_list[t], a = new Array();
-            if (void 0 !== that.page.data.pay_type_list) a = that.page.data.pay_type_list; else if (void 0 !== o.pay_type_list) a = o.pay_type_list; else if (void 0 !== o.goods_list[0].pay_type_list) a = o.goods_list[0].pay_type_list; else {
-                var r = {
+        var parent_id = getApp().core.getStorageSync(getApp().const.PARENT_ID);
+        parent_id || (parent_id = 0), that.page.orderPay = function (res) {
+            var dataIndex = res.currentTarget.dataset.index, orderList = that.page.data.order_list[dataIndex],
+                array = new Array();
+            if (void 0 !== that.page.data.pay_type_list) array = that.page.data.pay_type_list; else if (void 0 !== orderList.pay_type_list) array = orderList.pay_type_list; else if (void 0 !== orderList.goods_list[0].pay_type_list) array = orderList.goods_list[0].pay_type_list; else {
+                var payment = {
                     payment: 0
                 };
-                a.push(r);
+                array.push(payment);
             }
-            var p = getCurrentPages(), s = p[p.length - 1].route, n = {};
-            if (-1 != s.indexOf("pt")) c = A.group.pay_data, n.order_id = o.order_id; else if (-1 != s.indexOf("miaosha")) c = A.miaosha.pay_data,
-                n.order_id = o.order_id; else if (-1 != s.indexOf("book")) c = A.book.order_pay,
-                n.id = o.id; else {
-                var c = A.order.pay_data;
-                n.order_id = o.order_id;
+            var page = getCurrentPages(), routes = page[page.length - 1].route, order_list = {};
+            if (-1 != routes.indexOf("pt")) pay_data = Api.group.pay_data, order_list.order_id = orderList.order_id; else if (-1 != routes.indexOf("miaosha")) pay_data = Api.miaosha.pay_data,
+                order_list.order_id = orderList.order_id; else if (-1 != routes.indexOf("book")) pay_data = Api.book.order_pay,
+                order_list.id = orderList.id; else {
+                var pay_data = Api.order.pay_data;
+                order_list.order_id = orderList.order_id;
             }
 
-            function i(e, t, o) {
-                e.pay_type = "WECHAT_PAY", app.request({
-                    url: t,
-                    data: e,
+            //微信支付
+            function WECHAT_PAY(order_list, url, routes) {
+                order_list.pay_type = "WECHAT_PAY", app.request({
+                    url: url,
+                    data: order_list,
                     complete: function () {
                         getApp().core.hideLoading();
                     },
-                    success: function (e) {
-                        0 == e.code && (setOnShowScene("pay"), getApp().core.requestPayment({
-                            _res: e,
-                            timeStamp: e.data.timeStamp,
-                            nonceStr: e.data.nonceStr,
-                            package: e.data.package,
-                            signType: e.data.signType,
-                            paySign: e.data.paySign,
+                    success: function (res) {
+                        0 == res.code && (setOnShowScene("pay"), getApp().core.requestPayment({
+                            _res: res,
+                            timeStamp: res.data.timeStamp,
+                            nonceStr: res.data.nonceStr,
+                            package: res.data.package,
+                            signType: res.data.signType,
+                            paySign: res.data.paySign,
                             success: function (e) {
                             },
-                            fail: function (e) {
+                            fail: function (error) {
                             },
-                            complete: function (e) {
-                                "requestPayment:fail" != e.errMsg && "requestPayment:fail cancel" != e.errMsg ? getApp().core.redirectTo({
-                                    url: "/" + o + "?status=1"
+                            complete: function (info) {
+                                "requestPayment:fail" != info.errMsg && "requestPayment:fail cancel" != info.errMsg ? getApp().core.redirectTo({
+                                    url: "/" + routes + "?status=1"
                                 }) : getApp().core.showModal({
                                     title: "提示",
                                     content: "订单尚未支付",
@@ -58,38 +59,39 @@
                                     confirmText: "确认",
                                     success: function (e) {
                                         e.confirm && getApp().core.redirectTo({
-                                            url: "/" + o + "?status=0"
+                                            url: "/" + routes + "?status=0"
                                         });
                                     }
                                 });
                             }
-                        })), 1 == e.code && getApp().core.showToast({
-                            title: e.msg,
+                        })), 1 == res.code && getApp().core.showToast({
+                            title: res.msg,
                             image: "/images/icon-warning.png"
                         });
                     }
                 });
             }
 
-            function d(t, o, a) {
-                t.pay_type = "BALANCE_PAY";
-                var e = getApp().getUser();
+            //余额支付
+            function BALANCE_PAY(order_list, url, routes) {
+                order_list.pay_type = "BALANCE_PAY";
+                var userinfo = getApp().getUser();
                 getApp().core.showModal({
-                    title: "当前账户余额：" + e.money,
+                    title: "当前账户余额：" + userinfo.money,
                     content: "是否使用余额",
-                    success: function (e) {
-                        e.confirm && (getApp().core.showLoading({
+                    success: function (res) {
+                        res.confirm && (getApp().core.showLoading({
                             title: "正在提交",
                             mask: !0
                         }), app.request({
-                            url: o,
-                            data: t,
+                            url: url,
+                            data: order_list,
                             complete: function () {
                                 getApp().core.hideLoading();
                             },
                             success: function (e) {
                                 0 == e.code && getApp().core.redirectTo({
-                                    url: "/" + a + "?status=1"
+                                    url: "/" + routes + "?status=1"
                                 }), 1 == e.code && getApp().core.showModal({
                                     title: "提示",
                                     content: e.msg,
@@ -101,10 +103,10 @@
                 });
             }
 
-            n.parent_id = m, n.condition = 2, 1 == a.length ? (getApp().core.showLoading({
+            order_list.parent_id = parent_id, order_list.condition = 2, 1 == array.length ? (getApp().core.showLoading({
                 title: "正在提交",
                 mask: !0
-            }), 0 == a[0].payment && i(n, c, s), 3 == a[0].payment && d(n, c, s)) : getApp().core.showModal({
+            }), 0 == array[0].payment && WECHAT_PAY(order_list, pay_data, routes), 3 == array[0].payment && BALANCE_PAY(order_list, pay_data, routes)) : getApp().core.showModal({
                 title: "提示",
                 content: "选择支付方式",
                 cancelText: "余额支付",
@@ -113,209 +115,211 @@
                     e.confirm ? (getApp().core.showLoading({
                         title: "正在提交",
                         mask: !0
-                    }), i(n, c, s)) : e.cancel && d(n, c, s);
+                    }), WECHAT_PAY(order_list, pay_data, routes)) : e.cancel && BALANCE_PAY(order_list, pay_data, routes);
                 }
             });
-        }, that.page.order_submit = function (order_list, g) {
-            var e = A.order.submit, p = A.order.pay_data, u = "/pages/order/order";
-            if ("pt" == g ? (e = A.group.submit, p = A.group.pay_data, u = "/pages/pt/order/order") : "ms" == g ? (e = A.miaosha.submit,
-                p = A.miaosha.pay_data, u = "/pages/miaosha/order/order") : "pond" == g ? (e = A.pond.submit,
-                p = A.order.pay_data, u = "/pages/order/order") : "scratch" == g ? (e = A.scratch.submit,
-                p = A.order.pay_data, u = "/pages/order/order") : "lottery" == g ? (e = A.lottery.submit,
-                p = A.order.pay_data, u = "/pages/order/order") : "step" == g ? (e = A.step.submit,
-                p = A.order.pay_data, u = "/pages/order/order") : "s" == g && (e = A.order.new_submit,
-                p = A.order.pay_data, u = "/pages/order/order"), 3 == order_list.payment) {
-                let password = "123123";
-                var userinfo = getApp().getUser();
-                console.log(order_list)
-                // if (order_list.password == password) {
-                //     o();
-                // } else if (order_list.password == null || order_list.password == '') {
-                //     return
-                // } else if (order_list.password != password) {
-                //     return wx.showToast({
-                //         icon: "none",
-                //         title: '密码错误,请重新输入'
-                //     })
-                // }
-                //使用余额支付
-                getApp().core.showModal({
-                    title: "当前账户余额：" + userinfo.money,
-                    content: "是否确定使用余额支付",
-                    success: function (e) {
-                        console.log(e)
-                        e.confirm && o();
-                    }
-                });
-            } else o();
+        },
+            that.page.order_submit = function (order_list, post_type) {
+                var submit_url = Api.order.submit, pay_data = Api.order.pay_data, site = "/pages/order/order";
+                if ("pt" == post_type ? (submit_url = Api.group.submit, pay_data = Api.group.pay_data, site = "/pages/pt/order/order") : "ms" == post_type ? (submit_url = Api.miaosha.submit,
+                    pay_data = Api.miaosha.pay_data, site = "/pages/miaosha/order/order") : "pond" == post_type ? (submit_url = Api.pond.submit,
+                    pay_data = Api.order.pay_data, site = "/pages/order/order") : "scratch" == post_type ? (submit_url = Api.scratch.submit,
+                    pay_data = Api.order.pay_data, site = "/pages/order/order") : "lottery" == post_type ? (submit_url = Api.lottery.submit,
+                    pay_data = Api.order.pay_data, site = "/pages/order/order") : "step" == post_type ? (submit_url = Api.step.submit,
+                    pay_data = Api.order.pay_data, site = "/pages/order/order") : "s" == post_type && (submit_url = Api.order.new_submit,
+                    pay_data = Api.order.pay_data, site = "/pages/order/order"), 3 == order_list.payment) {
+                    var userinfo = getApp().getUser();
+                    console.log(order_list)
+                    // if (order_list.password == password) {
+                    //     o();
+                    // } else if (order_list.password == null || order_list.password == '') {
+                    //     return
+                    // } else if (order_list.password != password) {
+                    //     return wx.showToast({
+                    //         icon: "none",
+                    //         title: '密码错误,请重新输入'
+                    //     })
+                    // }
+                    getApp().core.showModal({
+                        title: "当前账户余额：" + userinfo.money,
+                        content: "是否确定使用余额支付",
+                        success: function (res) {
+                            res.confirm && pay();
+                        }
+                    });
+                } else pay();
 
-            function o() {
-                getApp().core.showLoading({
-                    title: "正在提交",
-                    mask: !0
-                }), app.request({
-                    url: e,
-                    method: "post",
-                    data: order_list,
-                    success: function (e) {
-                        if (0 == e.code) {
-                            var t = function () {
-                                app.request({
-                                    url: p,
-                                    data: {
-                                        order_id: d,
-                                        order_id_list: o,
-                                        pay_type: a,
-                                        form_id: order_list.formId,
-                                        parent_user_id: m,
-                                        condition: 2
-                                    },
-                                    success: function (e) {
-                                        wx.requestSubscribeMessage({
-                                            tmplIds: [deliver_template, order_template, pt_template],
-                                            success(res) {
-                                                console.log(res)
-                                                console.log('成功')
-                                            },
-                                            fail(err) {
-                                                console.log(err)
-                                                console.log('失败')
-                                            }
-                                        })
-                                        if (0 != e.code) return getApp().core.hideLoading(), void getApp().core.showModal({
-                                            title: "提示",
-                                            content: e.msg,
-                                            showCancel: !1,
-                                            confirmText: "确认",
-                                            success: function (e) {
-                                                e.confirm && getApp().core.redirectTo({
-                                                    url: u + "?status=0",
-                                                });
-                                            }
-                                        });
-                                        setTimeout(function () {
-                                            getApp().core.hideLoading();
-                                        }, 1e3), "pt" == g ? "ONLY_BUY" == that.page.data.type ? getApp().core.redirectTo({
-                                            url: u + "?status=2"
-                                        }) : getApp().core.redirectTo({
-                                            url: "/pages/pt/group/details?oid=" + d
-                                        }) : void 0 !== that.page.data.goods_card_list && 0 < that.page.data.goods_card_list.length && 2 != order_list.payment ? that.page.setData({
-                                            show_card: !0
-                                        }) : getApp().core.redirectTo({
-                                            url: u + "?status=-1",
-                                        });
-                                    }
-                                });
-                            };
-                            if (getApp().page.bindParent({
-                                parent_id: m,
-                                condition: 1
-                            }), null != e.data.p_price && 0 === e.data.p_price) return "step" == g ? getApp().core.showToast({
-                                title: "兑换成功"
-                            }) : getApp().core.showToast({
-                                title: "提交成功"
-                            }), void setTimeout(function () {
-                                getApp().core.redirectTo({
-                                    url: "/pages/order/order?status=1"
-                                });
-                            }, 2e3);
-                            setTimeout(function () {
-                                that.page.setData({
-                                    options: {}
-                                });
-                            }, 1);
-                            var d = e.data.order_id || "",
-                                o = e.data.order_id_list ? JSON.stringify(e.data.order_id_list) : "", a = "";
-                            0 == order_list.payment ? app.request({
-                                url: p,
-                                data: {
-                                    order_id: d,
-                                    order_id_list: o,
-                                    pay_type: "WECHAT_PAY",
-                                    parent_user_id: m,
-                                    condition: 2
-                                },
-                                success: function (e) {
-                                    if (0 != e.code) {
-                                        if (1 == e.code) return getApp().core.hideLoading(), void getApp().core.showToast({
-                                            title: e.msg,
-                                            image: "/images/icon-warning.png"
-                                        });
-                                    } else {
-                                        setTimeout(function () {
-                                            getApp().core.hideLoading();
-                                        }, 1e3), setOnShowScene("pay"), e.data && 0 == e.data.price ? void 0 !== that.page.data.goods_card_list && 0 < that.page.data.goods_card_list.length ? that.page.setData({
-                                            show_card: !0
-                                        }) : getApp().core.redirectTo({
-                                            url: u + "?status=1"
-                                        }) : getApp().core.requestPayment({
-                                            _res: e,
-                                            timeStamp: e.data.timeStamp,
-                                            nonceStr: e.data.nonceStr,
-                                            package: e.data.package,
-                                            signType: e.data.signType,
-                                            paySign: e.data.paySign,
-                                            success: function (e) {
-                                            },
-                                            fail: function (e) {
-                                            },
-                                            complete: function (e) {
-                                                "requestPayment:fail" != e.errMsg && "requestPayment:fail cancel" != e.errMsg ? "requestPayment:ok" != e.errMsg || (void 0 !== _.page.data.goods_card_list && 0 < _.page.data.goods_card_list.length ? _.page.setData({
-                                                    show_card: !0
-                                                }) : "pt" == g ? "ONLY_BUY" == _.page.data.type ? getApp().core.redirectTo({
-                                                    url: u + "?status=2"
-                                                }) : getApp().core.redirectTo({
-                                                    url: "/pages/pt/group/details?oid=" + d
-                                                }) : getApp().core.redirectTo({
-                                                    url: u + "?status=1"
-                                                })) : getApp().core.showModal({
-                                                    title: "提示",
-                                                    content: "订单尚未支付",
-                                                    showCancel: !1,
-                                                    confirmText: "确认",
-                                                    success: function (e) {
-                                                        e.confirm && getApp().core.redirectTo({
-                                                            url: u + "?status=0"
-                                                        });
-                                                    }
-                                                });
-                                            }
-                                        });
-                                        var t = getApp().core.getStorageSync(getApp().const.QUICK_LIST);
-                                        if (t) {
-                                            for (var o = t.length, a = 0; a < o; a++) for (var r = t[a].goods, p = r.length, s = 0; s < p; s++) r[s].num = 0;
-                                            getApp().core.setStorageSync(getApp().const.QUICK_LISTS, t);
-                                            var n = getApp().core.getStorageSync(getApp().const.CARGOODS);
-                                            for (o = n.length, a = 0; a < o; a++) n[a].num = 0, n[a].goods_price = 0, l.setData({
-                                                carGoods: n
-                                            });
-                                            getApp().core.setStorageSync(getApp().const.CARGOODS, n);
-                                            var c = getApp().core.getStorageSync(getApp().const.TOTAL);
-                                            c && (c.total_num = 0, c.total_price = 0, getApp().core.setStorageSync(getApp().const.TOTAL, c));
-                                            getApp().core.getStorageSync(getApp().const.CHECK_NUM);
-                                            0, getApp().core.setStorageSync(getApp().const.CHECK_NUM, 0);
-                                            var i = getApp().core.getStorageSync(getApp().const.QUICK_HOT_GOODS_LISTS);
-                                            for (o = i.length, a = 0; a < o; a++) i[a].num = 0, l.setData({
-                                                quick_hot_goods_lists: i
-                                            });
-                                            getApp().core.setStorageSync(getApp().const.QUICK_HOT_GOODS_LISTS, i);
-                                        }
-                                    }
-                                }
-                            }) : 2 == order_list.payment ? (a = "HUODAO_PAY", t()) : 3 == order_list.payment && (a = "BALANCE_PAY",
-                                t());
-                        }
-                        1 == e.code && (getApp().core.hideLoading(), "活力币不足" == e.msg && that.page.data.store.option.step.currency_name ? getApp().core.showToast({
-                            icon: "none",
-                            title: that.page.data.store.option.step.currency_name + "不足"
-                        }) : getApp().core.showToast({
-                            icon: "none",
-                            title: e.msg
-                        }));
-                    }
-                });
-            }
-        };
+                function pay() {
+                    getApp().core.showLoading({
+                        title: "正在提交",
+                        mask: !0
+                    }), app.request({
+                        url: submit_url,
+                        method: "post",
+                        data: order_list,
+                        success: function (e) {
+                            if (0 == e.code) {
+                                var t = function () {
+                                    app.request({
+                                        url: pay_data,
+                                        data: {
+                                            order_id: d,
+                                            order_id_list: o,
+                                            pay_type: a,
+                                            form_id: order_list.formId,
+                                            parent_user_id: parent_id,
+                                            condition: 2
+                                        },
+                                        success: function (e) {
+                                            //获取用户权限，发送信息
+                                            wx.requestSubscribeMessage({
+                                                tmplIds: [deliver_template, order_template, pt_template],
+                                                success(res) {
+                                                    console.log(res)
+                                                },
+                                                fail(err) {
+                                                    console.log(err)
+                                                }
+                                            })
+                                            if (0 != e.code) return getApp().core.hideLoading(), void getApp().core.showModal({
+                                                title: "提示",
+                                                content: e.msg,
+                                                showCancel: !1,
+                                                confirmText: "确认",
+                                                success: function (e) {
+                                                    e.confirm && getApp().core.redirectTo({
+                                                        url: site + "?status=0",
+                                                    });
+                                                }
+                                            });
+                                            setTimeout(function () {
+                                                getApp().core.hideLoading();
+                                            }, 1e3), "pt" == post_type ? "ONLY_BUY" == that.page.data.type ? getApp().core.redirectTo({
+                                                url: site + "?status=2"
+                                            }) : getApp().core.redirectTo({
+                                                url: "/pages/pt/group/details?oid=" + d
+                                            }) : void 0 !== that.page.data.goods_card_list && 0 < that.page.data.goods_card_list.length && 2 != order_list.payment ? that.page.setData({
+                                                show_card: !0
+                                            }) : getApp().core.redirectTo({
+                                                url: site + "?status=-1",
+                                            });
+                                        }
+                                    });
+                                };
+                                if (getApp().page.bindParent({
+                                    parent_id: parent_id,
+                                    condition: 1
+                                }), null != e.data.p_price && 0 === e.data.p_price) return "step" == post_type ? getApp().core.showToast({
+                                    title: "兑换成功"
+                                }) : getApp().core.showToast({
+                                    title: "提交成功"
+                                }), void setTimeout(function () {
+                                    getApp().coore.redirectTo({
+                                        url: "/pages/order/order?status=1"
+                                    });
+                                }, 2e3);
+                                setTimeout(function () {
+                                    that.page.setData({
+                                        options: {}
+                                    });
+                                }, 1);
+                                var d = e.data.order_id || "",
+                                    o = e.data.order_id_list ? JSON.stringify(e.data.order_id_list) : "", a = "";
+                                0 == order_list.payment ? app.request({
+                                    url: pay_data,
+                                    data: {
+                                        order_id: d,
+                                        order_id_list: o,
+                                        pay_type: "WECHAT_PAY",
+                                        parent_user_id: parent_id,
+                                        condition: 2
+                                    },
+                                    success: function (e) {
+                                        if (0 != e.code) {
+                                            if (1 == e.code) return getApp().core.hideLoading(), void getApp().core.showToast({
+                                                title: e.msg,
+                                                image: "/images/icon-warning.png"
+                                            });
+                                        } else {
+                                            setTimeout(function () {
+                                                getApp().core.hideLoading();
+                                            }, 1e3), setOnShowScene("pay"), e.data && 0 == e.data.price ? void 0 !== that.page.data.goods_card_list && 0 < that.page.data.goods_card_list.length ? that.page.setData({
+                                                show_card: !0
+                                            }) : getApp().core.redirectTo({
+                                                url: site + "?status=1"
+                                            }) : getApp().core.requestPayment({
+                                                _res: e,
+                                                timeStamp: e.data.timeStamp,
+                                                nonceStr: e.data.nonceStr,
+                                                package: e.data.package,
+                                                signType: e.data.signType,
+                                                paySign: e.data.paySign,
+                                                success: function (e) {
+                                                    console.log(e)
+                                                },
+                                                fail: function (e) {
+                                                    console.log("失败")
+                                                    console.log(e)
+                                                },
+                                                complete: function (e) {
+                                                    console.log(e)
+                                                    console.log("全部")
+                                                    "requestPayment:fail" != e.errMsg && "requestPayment:fail cancel" != e.errMsg ? "requestPayment:ok" != e.errMsg || (void 0 !== that.page.data.goods_card_list && 0 < _.page.data.goods_card_list.length ? _.page.setData({
+                                                        show_card: !0
+                                                    }) : "pt" == post_type ? "ONLY_BUY" == that.page.data.type ? getApp().core.redirectTo({
+                                                        url: site + "?status=2"
+                                                    }) : getApp().core.redirectTo({
+                                                        url: "/pages/pt/group/details?oid=" + d
+                                                    }) : getApp().core.redirectTo({
+                                                        url: site + "?status=1"
+                                                    })) : getApp().core.showModal({
+                                                        title: "提示",
+                                                        content: "订单尚未支付",
+                                                        showCancel: !1,
+                                                        confirmText: "确认",
+                                                        success: function (e) {
+                                                            e.confirm && getApp().core.redirectTo({
+                                                                url: site + "?status=0"
+                                                            });
+                                                        }
+                                                    });
+                                                }
+                                            });
+                                            var t = getApp().core.getStorageSync(getApp().const.QUICK_LIST);
+                                            if (t) {
+                                                for (var o = t.length, a = 0; a < o; a++) for (var r = t[a].goods, p = r.length, s = 0; s < p; s++) r[s].num = 0;
+                                                getApp().core.setStorageSync(getApp().const.QUICK_LISTS, t);
+                                                var n = getApp().core.getStorageSync(getApp().const.CARGOODS);
+                                                for (o = n.length, a = 0; a < o; a++) n[a].num = 0, n[a].goods_price = 0, l.setData({
+                                                    carGoods: n
+                                                });
+                                                getApp().core.setStorageSync(getApp().const.CARGOODS, n);
+                                                var c = getApp().core.getStorageSync(getApp().const.TOTAL);
+                                                c && (c.total_num = 0, c.total_price = 0, getApp().core.setStorageSync(getApp().const.TOTAL, c));
+                                                getApp().core.getStorageSync(getApp().const.CHECK_NUM);
+                                                0, getApp().core.setStorageSync(getApp().const.CHECK_NUM, 0);
+                                                var i = getApp().core.getStorageSync(getApp().const.QUICK_HOT_GOODS_LISTS);
+                                                for (o = i.length, a = 0; a < o; a++) i[a].num = 0, l.setData({
+                                                    quick_hot_goods_lists: i
+                                                });
+                                                getApp().core.setStorageSync(getApp().const.QUICK_HOT_GOODS_LISTS, i);
+                                            }
+                                        }
+                                    }
+                                }) : 2 == order_list.payment ? (a = "HUODAO_PAY", t()) : 3 == order_list.payment && (a = "BALANCE_PAY",
+                                    t());
+                            }
+                            1 == e.code && (getApp().core.hideLoading(), "活力币不足" == e.msg && that.page.data.store.option.step.currency_name ? getApp().core.showToast({
+                                icon: "none",
+                                title: that.page.data.store.option.step.currency_name + "不足"
+                            }) : getApp().core.showToast({
+                                icon: "none",
+                                title: e.msg
+                            }));
+                        }
+                    });
+                }
+            };
     }
 };
 
Index: core/const.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>var _module$exports;\n\nfunction _defineProperty(e, _, r) {\n    return _ in e ? Object.defineProperty(e, _, {\n        value: r,\n        enumerable: !0,\n        configurable: !0,\n        writable: !0\n    }) : e[_] = r, e;\n}\n\nmodule.exports = (_defineProperty(_module$exports = {\n    FORM_ID_LIST: \"FORM_ID_LIST\",\n    LOGIN_PRE_PAGE: \"LOGIN_PRE_PAGE\",\n    NAVIGATION_BAR_COLOR: \"NAVIGATION_BAR_COLOR\",\n    WX_BAR_TITLE: \"WX_BAR_TITLE\",\n    USER_INFO: \"USER_INFO\",\n    STORE_CONFIG: \"STORE_CONFIG\",\n    STORE: \"STORE\",\n    STORE_NAME: \"STORE_NAME\",\n    SHOW_CUSTOMER_SERVICE: \"SHOW_CUSTOMER_SERVICE\",\n    CONTACT_TEL: \"CONTACT_TEL\",\n    SHARE_SETTING: \"SHARE_SETTING\",\n    WXAPP_IMG: \"WXAPP_IMG\"\n}, \"WX_BAR_TITLE\", \"WX_BAR_TITLE\"), _defineProperty(_module$exports, \"ALIPAY_MP_CONFIG\", \"ALIPAY_MP_CONFIG\"), \n_defineProperty(_module$exports, \"PAGE_INDEX_INDEX\", \"PAGE_INDEX_INDEX\"), _defineProperty(_module$exports, \"ITEM\", \"ITEM\"), \n_defineProperty(_module$exports, \"CAT_LIST\", \"CAT_LIST\"), _defineProperty(_module$exports, \"LIST_PAGE_RELOAD\", \"LIST_PAGE_RELOAD\"), \n_defineProperty(_module$exports, \"LIST_PAGE_OPTIONS\", \"LIST_PAGE_OPTIONS\"), _defineProperty(_module$exports, \"PICKER_ADDRESS\", \"PICKER_ADDRESS\"), \n_defineProperty(_module$exports, \"DISTRICT\", \"DISTRICT\"), _defineProperty(_module$exports, \"CUSTOM\", \"CUSTOM\"), \n_defineProperty(_module$exports, \"DISTRICT\", \"DISTRICT\"), _defineProperty(_module$exports, \"INPUT_DATA\", \"INPUT_DATA\"), \n_defineProperty(_module$exports, \"PAGES_USER_USER\", \"PAGES_USER_USER\"), _defineProperty(_module$exports, \"SEARCH_HISTORY_LIST\", \"SEARCH_HISTORY_LIST\"), \n_defineProperty(_module$exports, \"PT_GROUP_DETAIL\", \"PT_GROUP_DETAIL\"), _defineProperty(_module$exports, \"HISTORY_INFO\", \"HISTORY_INFO\"), \n_defineProperty(_module$exports, \"CURRENT_DAY_LIST\", \"CURRENT_DAY_LIST\"), _defineProperty(_module$exports, \"ACCESS_TOKEN\", \"ACCESS_TOKEN\"), \n_defineProperty(_module$exports, \"QUICK_LIST\", \"QUICK_LIST\"), _defineProperty(_module$exports, \"QUICK_LISTS\", \"QUICK_LISTS\"), \n_defineProperty(_module$exports, \"CARGOODS\", \"CARGOODS\"), _defineProperty(_module$exports, \"TOTAL\", \"TOTAL\"), \n_defineProperty(_module$exports, \"CHECK_NUM\", \"CHECK_NUM\"), _defineProperty(_module$exports, \"QUICK_HOT_GOODS_LISTS\", \"QUICK_HOT_GOODS_LISTS\"), \n_defineProperty(_module$exports, \"PARENT_ID\", \"PARENT_ID\"), _defineProperty(_module$exports, \"NAVIGATION_BAR_COLOR\", \"NAVIGATION_BAR_COLOR\"), \n_module$exports);
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/core/const.js b/core/const.js
--- a/core/const.js	
+++ b/core/const.js	
@@ -1,12 +1,12 @@
 var _module$exports;
 
-function _defineProperty(e, _, r) {
-    return _ in e ? Object.defineProperty(e, _, {
-        value: r,
+function _defineProperty(res, _, value) {
+    return _ in res ? Object.defineProperty(res, _, {
+        value: value,
         enumerable: !0,
         configurable: !0,
         writable: !0
-    }) : e[_] = r, e;
+    }) : res[_] = value, res;
 }
 
 module.exports = (_defineProperty(_module$exports = {
@@ -22,17 +22,17 @@
     CONTACT_TEL: "CONTACT_TEL",
     SHARE_SETTING: "SHARE_SETTING",
     WXAPP_IMG: "WXAPP_IMG"
-}, "WX_BAR_TITLE", "WX_BAR_TITLE"), _defineProperty(_module$exports, "ALIPAY_MP_CONFIG", "ALIPAY_MP_CONFIG"), 
-_defineProperty(_module$exports, "PAGE_INDEX_INDEX", "PAGE_INDEX_INDEX"), _defineProperty(_module$exports, "ITEM", "ITEM"), 
-_defineProperty(_module$exports, "CAT_LIST", "CAT_LIST"), _defineProperty(_module$exports, "LIST_PAGE_RELOAD", "LIST_PAGE_RELOAD"), 
-_defineProperty(_module$exports, "LIST_PAGE_OPTIONS", "LIST_PAGE_OPTIONS"), _defineProperty(_module$exports, "PICKER_ADDRESS", "PICKER_ADDRESS"), 
-_defineProperty(_module$exports, "DISTRICT", "DISTRICT"), _defineProperty(_module$exports, "CUSTOM", "CUSTOM"), 
-_defineProperty(_module$exports, "DISTRICT", "DISTRICT"), _defineProperty(_module$exports, "INPUT_DATA", "INPUT_DATA"), 
-_defineProperty(_module$exports, "PAGES_USER_USER", "PAGES_USER_USER"), _defineProperty(_module$exports, "SEARCH_HISTORY_LIST", "SEARCH_HISTORY_LIST"), 
-_defineProperty(_module$exports, "PT_GROUP_DETAIL", "PT_GROUP_DETAIL"), _defineProperty(_module$exports, "HISTORY_INFO", "HISTORY_INFO"), 
-_defineProperty(_module$exports, "CURRENT_DAY_LIST", "CURRENT_DAY_LIST"), _defineProperty(_module$exports, "ACCESS_TOKEN", "ACCESS_TOKEN"), 
-_defineProperty(_module$exports, "QUICK_LIST", "QUICK_LIST"), _defineProperty(_module$exports, "QUICK_LISTS", "QUICK_LISTS"), 
-_defineProperty(_module$exports, "CARGOODS", "CARGOODS"), _defineProperty(_module$exports, "TOTAL", "TOTAL"), 
-_defineProperty(_module$exports, "CHECK_NUM", "CHECK_NUM"), _defineProperty(_module$exports, "QUICK_HOT_GOODS_LISTS", "QUICK_HOT_GOODS_LISTS"), 
-_defineProperty(_module$exports, "PARENT_ID", "PARENT_ID"), _defineProperty(_module$exports, "NAVIGATION_BAR_COLOR", "NAVIGATION_BAR_COLOR"), 
-_module$exports);
\ No newline at end of file
+}, "WX_BAR_TITLE", "WX_BAR_TITLE"), _defineProperty(_module$exports, "ALIPAY_MP_CONFIG", "ALIPAY_MP_CONFIG"),
+    _defineProperty(_module$exports, "PAGE_INDEX_INDEX", "PAGE_INDEX_INDEX"), _defineProperty(_module$exports, "ITEM", "ITEM"),
+    _defineProperty(_module$exports, "CAT_LIST", "CAT_LIST"), _defineProperty(_module$exports, "LIST_PAGE_RELOAD", "LIST_PAGE_RELOAD"),
+    _defineProperty(_module$exports, "LIST_PAGE_OPTIONS", "LIST_PAGE_OPTIONS"), _defineProperty(_module$exports, "PICKER_ADDRESS", "PICKER_ADDRESS"),
+    _defineProperty(_module$exports, "DISTRICT", "DISTRICT"), _defineProperty(_module$exports, "CUSTOM", "CUSTOM"),
+    _defineProperty(_module$exports, "DISTRICT", "DISTRICT"), _defineProperty(_module$exports, "INPUT_DATA", "INPUT_DATA"),
+    _defineProperty(_module$exports, "PAGES_USER_USER", "PAGES_USER_USER"), _defineProperty(_module$exports, "SEARCH_HISTORY_LIST", "SEARCH_HISTORY_LIST"),
+    _defineProperty(_module$exports, "PT_GROUP_DETAIL", "PT_GROUP_DETAIL"), _defineProperty(_module$exports, "HISTORY_INFO", "HISTORY_INFO"),
+    _defineProperty(_module$exports, "CURRENT_DAY_LIST", "CURRENT_DAY_LIST"), _defineProperty(_module$exports, "ACCESS_TOKEN", "ACCESS_TOKEN"),
+    _defineProperty(_module$exports, "QUICK_LIST", "QUICK_LIST"), _defineProperty(_module$exports, "QUICK_LISTS", "QUICK_LISTS"),
+    _defineProperty(_module$exports, "CARGOODS", "CARGOODS"), _defineProperty(_module$exports, "TOTAL", "TOTAL"),
+    _defineProperty(_module$exports, "CHECK_NUM", "CHECK_NUM"), _defineProperty(_module$exports, "QUICK_HOT_GOODS_LISTS", "QUICK_HOT_GOODS_LISTS"),
+    _defineProperty(_module$exports, "PARENT_ID", "PARENT_ID"), _defineProperty(_module$exports, "NAVIGATION_BAR_COLOR", "NAVIGATION_BAR_COLOR"),
+    _module$exports);
\ No newline at end of file
Index: core/api.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>var siteinfo = require(\"../siteinfo.js\"), _api_root = \"\";\n\nif (-1 != siteinfo.acid) {\n    var siteroot = siteinfo.siteroot.substr(0, siteinfo.siteroot.indexOf(\"app/index.php\"));\n    _api_root = _api_root = siteroot + \"addons/zjhj_mall/core/web/index.php?_acid=\" + siteinfo.acid + \"&r=api/\";\n} else _api_root = siteinfo.apiroot;\n\nvar api = {\n    index: _api_root + \"default/index\",\n    default: {\n        store: _api_root + \"default/store\",\n        index: _api_root + \"default/index\",\n        goods_list: _api_root + \"default/goods-list\",\n        cat_list: _api_root + \"default/cat-list\",\n        goods: _api_root + \"default/goods\",\n        district: _api_root + \"default/district\",\n        goods_attr_info: _api_root + \"default/goods-attr-info\",\n        upload_image: _api_root + \"default/upload-image\",\n        comment_list: _api_root + \"default/comment-list\",\n        article_list: _api_root + \"default/article-list\",\n        article_detail: _api_root + \"default/article-detail\",\n        video_list: _api_root + \"default/video-list\",\n        goods_qrcode: _api_root + \"default/goods-qrcode\",\n        coupon_list: _api_root + \"default/coupon-list\",\n        topic_list: _api_root + \"default/topic-list\",\n        topic: _api_root + \"default/topic\",\n        navbar: _api_root + \"default/navbar\",\n        navigation_bar_color: _api_root + \"default/navigation-bar-color\",\n        shop_list: _api_root + \"default/shop-list\",\n        shop_detail: _api_root + \"default/shop-detail\",\n        topic_type: _api_root + \"default/topic-type\",\n        buy_data: _api_root + \"default/buy-data\",\n        goods_recommend: _api_root + \"default/goods-recommend\",\n        search: _api_root + \"default/search\",\n        cats: _api_root + \"default/cats\",\n        topic_qrcode: _api_root + \"default/topic-qrcode\",\n        form_id: _api_root + \"default/form-id\"\n    },\n    cart: {\n        list: _api_root + \"cart/list\",\n        add_cart: _api_root + \"cart/add-cart\",\n        delete: _api_root + \"cart/delete\",\n        cart_edit: _api_root + \"cart/cart-edit\"\n    },\n    passport: {\n        login: _api_root + \"passport/login\",\n        on_login: _api_root + \"passport/on-login\"\n    },\n    order: {\n        submit_preview: _api_root + \"order/submit-preview\",\n        submit: _api_root + \"order/submit\",\n        pay_data: _api_root + \"order/pay-data\",\n        list: _api_root + \"order/list\",\n        revoke: _api_root + \"order/revoke\",\n        confirm: _api_root + \"order/confirm\",\n        count_data: _api_root + \"order/count-data\",\n        detail: _api_root + \"order/detail\",\n        refund_preview: _api_root + \"order/refund-preview\",\n        refund: _api_root + \"order/refund\",\n        refund_detail: _api_root + \"order/refund-detail\",\n        comment_preview: _api_root + \"order/comment-preview\",\n        comment: _api_root + \"order/comment\",\n        express_detail: _api_root + \"order/express-detail\",\n        clerk: _api_root + \"order/clerk\",\n        clerk_detail: _api_root + \"order/clerk-detail\",\n        get_qrcode: _api_root + \"order/get-qrcode\",\n        location: _api_root + \"order/location\",\n        refund_send: _api_root + \"order/refund-send\",\n        new_submit_preview: _api_root + \"order/new-submit-preview\",\n        new_submit: _api_root + \"order/new-submit\"\n    },\n    user: {\n        address_list: _api_root + \"user/address-list\",\n        address_detail: _api_root + \"user/address-detail\",\n        address_save: _api_root + \"user/address-save\",\n        address_set_default: _api_root + \"user/address-set-default\",\n        address_delete: _api_root + \"user/address-delete\",\n        save_form_id: _api_root + \"user/save-form-id\",\n        favorite_add: _api_root + \"user/favorite-add\",\n        favorite_remove: _api_root + \"user/favorite-remove\",\n        favorite_list: _api_root + \"user/favorite-list\",\n        index: _api_root + \"user/index\",\n        wechat_district: _api_root + \"user/wechat-district\",\n        add_wechat_address: _api_root + \"user/add-wechat-address\",\n        topic_favorite: _api_root + \"user/topic-favorite\",\n        topic_favorite_list: _api_root + \"user/topic-favorite-list\",\n        member: _api_root + \"user/member\",\n        card: _api_root + \"user/card\",\n        card_qrcode: _api_root + \"user/card-qrcode\",\n        card_clerk: _api_root + \"user/card-clerk\",\n        web_login: _api_root + \"user/web-login\",\n        submit_member: _api_root + \"user/submit-member\",\n        user_binding: _api_root + \"user/user-binding\",\n        user_hand_binding: _api_root + \"user/user-hand-binding\",\n        user_empower: _api_root + \"user/user-empower\",\n        sms_setting: _api_root + \"user/sms-setting\",\n        authorization_bind: _api_root + \"user/authorization-bind\",\n        check_bind: _api_root + \"user/check-bind\",\n        card_detail: _api_root + \"user/card-detail\",\n        set_pay_pas: _api_root + \"set-pay-psw\",\n        edit_pay_psw: _api_root + \"edit-pay-psw\"\n    },\n    share: {\n        join: _api_root + \"share/join\",\n        check: _api_root + \"share/check\",\n        get_info: _api_root + \"share/get-info\",\n        get_price: _api_root + \"share/get-price\",\n        apply: _api_root + \"share/apply\",\n        cash_detail: _api_root + \"share/cash-detail\",\n        get_qrcode: _api_root + \"share/get-qrcode\",\n        shop_share: _api_root + \"share/shop-share\",\n        bind_parent: _api_root + \"share/bind-parent\",\n        get_team: _api_root + \"share/get-team\",\n        get_order: _api_root + \"share/get-order\",\n        index: _api_root + \"share/index\"\n    },\n    coupon: {\n        index: _api_root + \"coupon/index\",\n        share_send: _api_root + \"coupon/share-send\",\n        receive: _api_root + \"coupon/receive\",\n        coupon_detail: _api_root + \"coupon/detail\"\n    },\n    miaosha: {\n        list: _api_root + \"miaosha/list\",\n        goods_list: _api_root + \"miaosha/goods-list\",\n        details: _api_root + \"miaosha/details\",\n        submit_preview: _api_root + \"miaosha/submit-preview\",\n        submit: _api_root + \"miaosha/submit\",\n        pay_data: _api_root + \"miaosha/pay-data\",\n        order_list: _api_root + \"miaosha/order-list\",\n        order_details: _api_root + \"miaosha/order-details\",\n        order_revoke: _api_root + \"miaosha/revoke\",\n        express_detail: _api_root + \"miaosha/express-detail\",\n        confirm: _api_root + \"miaosha/confirm\",\n        comment_preview: _api_root + \"miaosha/comment-preview\",\n        comment: _api_root + \"miaosha/comment\",\n        refund_preview: _api_root + \"miaosha/refund-preview\",\n        refund: _api_root + \"miaosha/refund\",\n        refund_detail: _api_root + \"miaosha/refund-detail\",\n        comment_list: _api_root + \"miaosha/comment-list\",\n        goods_qrcode: _api_root + \"miaosha/goods-qrcode\"\n    },\n    group: {\n        index: _api_root + \"group/index/index\",\n        list: _api_root + \"group/index/good-list\",\n        details: _api_root + \"group/index/good-details\",\n        goods_attr_info: _api_root + \"group/index/goods-attr-info\",\n        submit_preview: _api_root + \"group/order/submit-preview\",\n        submit: _api_root + \"group/order/submit\",\n        pay_data: _api_root + \"group/order/pay-data\",\n        order: {\n            list: _api_root + \"group/order/list\",\n            detail: _api_root + \"group/order/detail\",\n            express_detail: _api_root + \"group/order/express-detail\",\n            comment_preview: _api_root + \"group/order/comment-preview\",\n            comment: _api_root + \"group/order/comment\",\n            confirm: _api_root + \"group/order/confirm\",\n            goods_qrcode: _api_root + \"group/order/goods-qrcode\",\n            get_qrcode: _api_root + \"group/order/get-qrcode\",\n            clerk: _api_root + \"group/order/clerk\",\n            clerk_order_details: _api_root + \"group/order/clerk-order-details\",\n            revoke: _api_root + \"group/order/revoke\",\n            refund_preview: _api_root + \"group/order/refund-preview\",\n            refund: _api_root + \"group/order/refund\",\n            refund_detail: _api_root + \"group/order/refund-detail\"\n        },\n        group_info: _api_root + \"group/order/group\",\n        comment: _api_root + \"group/index/goods-comment\",\n        goods_qrcode: _api_root + \"group/index/goods-qrcode\",\n        search: _api_root + \"group/index/search\"\n    },\n    book: {\n        index: _api_root + \"book/index/index\",\n        list: _api_root + \"book/index/good-list\",\n        details: _api_root + \"book/index/good-details\",\n        submit_preview: _api_root + \"book/order/submit-preview\",\n        submit: _api_root + \"book/order/submit\",\n        order_list: _api_root + \"book/order/list\",\n        order_cancel: _api_root + \"book/order/cancel\",\n        order_pay: _api_root + \"book/order/pay-data\",\n        order_details: _api_root + \"book/order/order-details\",\n        shop_list: _api_root + \"book/index/shop-list\",\n        get_qrcode: _api_root + \"book/order/get-qrcode\",\n        clerk: _api_root + \"book/order/clerk\",\n        apply_refund: _api_root + \"book/order/apply-refund\",\n        comment_preview: _api_root + \"book/order/comment-preview\",\n        submit_comment: _api_root + \"book/order/comment\",\n        goods_comment: _api_root + \"book/index/goods-comment\",\n        goods_qrcode: _api_root + \"book/index/goods-qrcode\",\n        clerk_order_details: _api_root + \"book/order/clerk-order-details\",\n        goods_attr_info: _api_root + \"book/index/goods-attr-info\"\n    },\n    quick: {\n        quick: _api_root + \"quick/quick/quick\",\n        quick_goods: _api_root + \"quick/quick/quick-goods\",\n        quick_car: _api_root + \"quick/quick/quick-car\"\n    },\n    fxhb: {\n        open: _api_root + \"fxhb/index/open\",\n        open_submit: _api_root + \"fxhb/index/open-submit\",\n        detail: _api_root + \"fxhb/index/detail\",\n        detail_submit: _api_root + \"fxhb/index/detail-submit\"\n    },\n    recharge: {\n        index: _api_root + \"recharge/index\",\n        list: _api_root + \"recharge/list\",\n        submit: _api_root + \"recharge/submit\",\n        record: _api_root + \"recharge/record\",\n        detail: _api_root + \"recharge/detail\"\n    },\n    mch: {\n        apply: _api_root + \"mch/index/apply\",\n        apply_submit: _api_root + \"mch/index/apply-submit\",\n        shop: _api_root + \"mch/index/shop\",\n        shop_list: _api_root + \"mch/index/shop-list\",\n        shop_cat: _api_root + \"mch/index/shop-cat\",\n        user: {\n            myshop: _api_root + \"mch/user/myshop\",\n            setting: _api_root + \"mch/user/setting\",\n            setting_submit: _api_root + \"mch/user/setting-submit\",\n            shop_qrcode: _api_root + \"mch/user/shop-qrcode\",\n            account: _api_root + \"mch/user/account\",\n            cash: _api_root + \"mch/user/cash\",\n            account_log: _api_root + \"mch/user/account-log\",\n            cash_log: _api_root + \"mch/user/cash-log\",\n            tongji_year_list: _api_root + \"mch/user/tongji-year-list\",\n            tongji_month_data: _api_root + \"mch/user/tongji-month-data\",\n            cash_preview: _api_root + \"mch/user/cash-preview\",\n            settle_log: _api_root + \"mch/user/settle-log\"\n        },\n        goods: {\n            list: _api_root + \"mch/goods/list\",\n            set_status: _api_root + \"mch/goods/set-status\",\n            delete: _api_root + \"mch/goods/delete\"\n        },\n        order: {\n            list: _api_root + \"mch/order/list\",\n            detail: _api_root + \"mch/order/detail\",\n            send: _api_root + \"mch/order/send\",\n            refund: _api_root + \"mch/order/refund\",\n            edit_price: _api_root + \"mch/order/edit-price\",\n            refund_detail: _api_root + \"mch/order/refund-detail\"\n        }\n    },\n    integral: {\n        index: _api_root + \"integralmall/integralmall/index\",\n        coupon_info: _api_root + \"integralmall/integralmall/coupon-info\",\n        exchange_coupon: _api_root + \"integralmall/integralmall/exchange-coupon\",\n        integral_pay: _api_root + \"integralmall/integralmall/integral-pay\",\n        goods_info: _api_root + \"integralmall/integralmall/goods-info\",\n        submit_preview: _api_root + \"integralmall/integralmall/submit-preview\",\n        submit: _api_root + \"integralmall/integralmall/submit\",\n        list: _api_root + \"integralmall/integralmall/list\",\n        revoke: _api_root + \"integralmall/integralmall/revoke\",\n        order_submit: _api_root + \"integralmall/integralmall/order-submit\",\n        confirm: _api_root + \"integralmall/integralmall/confirm\",\n        get_qrcode: _api_root + \"integralmall/integralmall/get-qrcode\",\n        clerk_order_details: _api_root + \"integralmall/integralmall/clerk-order-details\",\n        clerk: _api_root + \"integralmall/integralmall/clerk\",\n        explain: _api_root + \"integralmall/integralmall/explain\",\n        exchange: _api_root + \"integralmall/integralmall/exchange\",\n        register: _api_root + \"integralmall/integralmall/register\",\n        integral_detail: _api_root + \"integralmall/integralmall/integral-detail\",\n        goods_list: _api_root + \"integralmall/integralmall/goods-list\"\n    },\n    pond: {\n        index: _api_root + \"pond/pond/index\",\n        lottery: _api_root + \"pond/pond/lottery\",\n        prize: _api_root + \"pond/pond/prize\",\n        send: _api_root + \"pond/pond/send\",\n        setting: _api_root + \"pond/pond/setting\",\n        submit: _api_root + \"pond/pond/submit\",\n        qrcode: _api_root + \"pond/pond/qrcode\"\n    },\n    bargain: {\n        index: _api_root + \"bargain/default/index\",\n        goods: _api_root + \"bargain/default/goods\",\n        bargain_submit: _api_root + \"bargain/order/bargain-submit\",\n        activity: _api_root + \"bargain/order/activity\",\n        bargain: _api_root + \"bargain/order/bargain\",\n        order_list: _api_root + \"bargain/order/order-list\",\n        setting: _api_root + \"bargain/default/setting\",\n        goods_user: _api_root + \"bargain/default/goods-user\",\n        qrcode: _api_root + \"bargain/default/qrcode\"\n    },\n    scratch: {\n        index: _api_root + \"scratch/scratch/index\",\n        receive: _api_root + \"scratch/scratch/receive\",\n        setting: _api_root + \"scratch/scratch/setting\",\n        prize: _api_root + \"scratch/scratch/prize\",\n        submit: _api_root + \"scratch/scratch/submit\",\n        log: _api_root + \"scratch/scratch/log\",\n        qrcode: _api_root + \"scratch/scratch/qrcode\"\n    },\n    lottery: {\n        index: _api_root + \"lottery/default/index\",\n        prize: _api_root + \"lottery/default/prize\",\n        detail: _api_root + \"lottery/default/detail\",\n        goods: _api_root + \"lottery/default/goods\",\n        submit: _api_root + \"lottery/default/submit\",\n        qrcode: _api_root + \"lottery/default/qrcode\",\n        setting: _api_root + \"lottery/default/setting\",\n        lucky_code: _api_root + \"lottery/default/lucky-code\",\n        clerk: _api_root + \"lottery/default/clerk\"\n    },\n    diy: {\n        detail: _api_root + \"diy/diy-template/detail\"\n    },\n    step: {\n        index: _api_root + \"step/default/index\",\n        setting: _api_root + \"step/default/setting\",\n        qrcode: _api_root + \"step/default/qrcode\",\n        log: _api_root + \"step/default/log\",\n        convert: _api_root + \"step/default/convert\",\n        ranking: _api_root + \"step/default/ranking\",\n        goods: _api_root + \"step/default/goods\",\n        activity: _api_root + \"step/default/activity\",\n        activity_join: _api_root + \"step/default/activity-join\",\n        activity_detail: _api_root + \"step/default/activity-detail\",\n        submit: _api_root + \"step/default/submit\",\n        activity_log: _api_root + \"step/default/activity-log\",\n        activity_submit: _api_root + \"step/default/activity-submit\",\n        remind: _api_root + \"step/default/remind\",\n        pic_list: _api_root + \"step/default/pic-list\",\n        invite_detail: _api_root + \"step/default/invite-detail\"\n    },\n    zhibo:{\n        list: _api_root + \"zhibo/list\"\n    }\n};\n\nmodule.exports = api;
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/core/api.js b/core/api.js
--- a/core/api.js	
+++ b/core/api.js	
@@ -97,8 +97,8 @@
         authorization_bind: _api_root + "user/authorization-bind",
         check_bind: _api_root + "user/check-bind",
         card_detail: _api_root + "user/card-detail",
-        set_pay_pas: _api_root + "set-pay-psw",
-        edit_pay_psw: _api_root + "edit-pay-psw"
+        set_pay_pwd: _api_root + "user/set-pay-psw",
+        edit_pay_pwd: _api_root + "user/edit-pay-psw"
     },
     share: {
         join: _api_root + "share/join",
Index: pages/address-edit/address-edit.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>var area_picker = require(\"./../../components/area-picker/area-picker.js\");\n\nPage({\n    data: {\n        name: \"\",\n        mobile: \"\",\n        detail: \"\",\n        district: null\n    },\n    // t > that  e > address\n    onLoad: function (address) {\n        getApp().page.onLoad(this, address);\n        var that = this;\n        // e > data(数据)\n        that.getDistrictData(function (data) {\n            area_picker.init({\n                page: that,\n                data: data\n            });\n        }), that.setData({\n            address_id: address.id\n        }), address.id && (getApp().core.showLoading({\n            title: \"正在加载\",\n            mask: !0\n        }), getApp().request({\n            url: getApp().api.user.address_detail,\n            data: {\n                id: address.id\n            },\n            success: function (e) {\n                getApp().core.hideLoading(), 0 == e.code && that.setData(e.data);\n            }\n        }));\n    },\n    // i > district\n    getDistrictData: function (t) {\n        var district = getApp().core.getStorageSync(getApp().const.DISTRICT);\n        if (!district) return getApp().core.showLoading({\n            title: \"正在加载\",\n            mask: !0\n        }), void getApp().request({\n            url: getApp().api.default.district,\n            success: function (e) {\n                getApp().core.hideLoading(), 0 == e.code && (district = e.data, getApp().core.setStorageSync(getApp().const.DISTRICT, district),\n                    t(district));\n            }\n        });\n        t(district);\n    },\n    onAreaPickerConfirm: function (e) {\n        this.setData({\n            district: {\n                province: {\n                    id: e[0].id,\n                    name: e[0].name\n                },\n                city: {\n                    id: e[1].id,\n                    name: e[1].name\n                },\n                district: {\n                    id: e[2].id,\n                    name: e[2].name\n                }\n            }\n        });\n    },\n    // t  > that\n    saveAddress: function () {\n        var that = this;\n        getApp().core.showLoading({\n            title: \"正在保存\",\n            mask: !0\n        });\n        // e > district\n        var district = that.data.district;\n        district|| (district = {\n            province: {\n                id: \"\"\n            },\n            city: {\n                id: \"\"\n            },\n            district: {\n                id: \"\"\n            }\n        }), getApp().request({\n            url: getApp().api.user.address_save,\n            method: \"post\",\n            data: {\n                address_id: that.data.address_id || \"\",\n                name: that.data.name,\n                mobile: that.data.mobile,\n                province_id: district.province.id,\n                city_id: district.city.id,\n                district_id: district.district.id,\n                detail: that.data.detail\n            },\n            success: function (e) {\n                getApp().core.hideLoading(), 0 == e.code && getApp().core.showModal({\n                    title: \"提示\",\n                    content: e.msg,\n                    showCancel: !1,\n                    success: function (e) {\n                        e.confirm && getApp().core.navigateBack();\n                    }\n                }), 1 == e.code && that.showToast({\n                    title: e.msg\n                });\n            }\n        });\n    },\n    // t >  message\n    inputBlur: function (e) {\n        var message = '{\"' + e.currentTarget.dataset.name + '\":\"' + e.detail.value + '\"}';\n        this.setData(JSON.parse(message));\n    },\n    // i > that\n    getWechatAddress: function () {\n        var that = this;\n        getApp().core.chooseAddress({\n            success: function (t) {\n                \"chooseAddress:ok\" == t.errMsg && (getApp().core.showLoading(), getApp().request({\n                    url: getApp().api.user.wechat_district,\n                    data: {\n                        national_code: t.nationalCode,\n                        province_name: t.provinceName,\n                        city_name: t.cityName,\n                        county_name: t.countyName\n                    },\n                    success: function (e) {\n                        1 == e.code && getApp().core.showModal({\n                            title: \"提示\",\n                            content: e.msg,\n                            showCancel: !1\n                        }), that.setData({\n                            name: t.userName || \"\",\n                            mobile: t.telNumber || \"\",\n                            detail: t.detailInfo || \"\",\n                            district: e.data.district\n                        });\n                    },\n                    complete: function () {\n                        getApp().core.hideLoading();\n                    }\n                }));\n            }\n        });\n    },\n    onShow: function () {\n        getApp().page.onShow(this);\n    }\n});
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/pages/address-edit/address-edit.js b/pages/address-edit/address-edit.js
--- a/pages/address-edit/address-edit.js	
+++ b/pages/address-edit/address-edit.js	
@@ -7,11 +7,11 @@
         detail: "",
         district: null
     },
-    // t > that  e > address
+
     onLoad: function (address) {
         getApp().page.onLoad(this, address);
         var that = this;
-        // e > data(数据)
+
         that.getDistrictData(function (data) {
             area_picker.init({
                 page: that,
@@ -32,7 +32,7 @@
             }
         }));
     },
-    // i > district
+
     getDistrictData: function (t) {
         var district = getApp().core.getStorageSync(getApp().const.DISTRICT);
         if (!district) return getApp().core.showLoading({
@@ -65,14 +65,13 @@
             }
         });
     },
-    // t  > that
+    //保存地址
     saveAddress: function () {
         var that = this;
         getApp().core.showLoading({
             title: "正在保存",
             mask: !0
         });
-        // e > district
         var district = that.data.district;
         district|| (district = {
             province: {
@@ -110,12 +109,12 @@
             }
         });
     },
-    // t >  message
+
     inputBlur: function (e) {
         var message = '{"' + e.currentTarget.dataset.name + '":"' + e.detail.value + '"}';
         this.setData(JSON.parse(message));
     },
-    // i > that
+
     getWechatAddress: function () {
         var that = this;
         getApp().core.chooseAddress({
Index: pages/address-edit/address-edit.wxml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><view class=\"page\">\n    <include src=\"/components/common/common.wxml\"></include>\n    <include src=\"/components/header/header.wxml\"></include>\n    <view class=\"body after-navber\">\n        <view class=\"bottom-bar\">\n            <view bindtap=\"saveAddress\">保存</view>\n        </view>\n        <view>\n            <view class=\"flex-row flex-y-center edit-row\">\n                <view class=\"flex-grow-0 row-label\">收货人</view>\n                <view class=\"flex-grow-1\">\n                    <input bindinput=\"inputBlur\" data-name=\"name\" placeholder=\"\" value=\"{{name}}\"></input>\n                </view>\n            </view>\n            <view class=\"flex-row flex-y-center edit-row\">\n                <view class=\"flex-grow-0 row-label\">联系电话</view>\n                <view class=\"flex-grow-1\">\n                    <input bindinput=\"inputBlur\" data-name=\"mobile\" placeholder=\"\" type=\"number\" value=\"{{mobile}}\"></input>\n                </view>\n            </view>\n            <view class=\"flex-row flex-y-center edit-row\">\n                <view class=\"flex-grow-0 row-label\">所在地区</view>\n                <view bindtap=\"showAreaPicker\" class=\"flex-grow-1 flex-row\">\n                    <view class=\"flex-grow-1\" style=\"text-align: right;padding-right: 24rpx\">\n                        <block wx:if=\"{{district==null}}\">请选择</block>\n                        <block wx:else>{{district.province.name}} {{district.city.name}} {{district.district.name}}</block>\n                    </view>\n                    <view class=\"flex-grow-0 flex-y-center\">\n                        <image src=\"{{__wxapp_img.store.jiantou_r.url}}\" style=\"width: 12rpx;height: 22rpx\"></image>\n                    </view>\n                </view>\n            </view>\n            <view class=\"flex-row flex-y-center edit-row\">\n                <view class=\"flex-grow-0 row-label\">详细地址</view>\n                <view class=\"flex-grow-1\">\n                    <input bindinput=\"inputBlur\" data-name=\"detail\" placeholder=\"\" value=\"{{detail}}\"></input>\n                </view>\n            </view>\n            <view bindtap=\"getWechatAddress\" class=\"get-wechat-address\" wx:if=\"{{__platform=='wx'}}\">授权一键获取地址</view>\n        </view>\n    </view>\n    <include src=\"/components/footer/footer.wxml\"></include>\n    <include src=\"./../../components/area-picker/area-picker.wxml\"></include>\n</view>\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/pages/address-edit/address-edit.wxml b/pages/address-edit/address-edit.wxml
--- a/pages/address-edit/address-edit.wxml	
+++ b/pages/address-edit/address-edit.wxml	
@@ -15,7 +15,7 @@
             <view class="flex-row flex-y-center edit-row">
                 <view class="flex-grow-0 row-label">联系电话</view>
                 <view class="flex-grow-1">
-                    <input bindinput="inputBlur" data-name="mobile" placeholder="" type="number" value="{{mobile}}"></input>
+                    <input bindinput="inputBlur" data-name="mobile" placeholder="" maxlength="{{11}}"  type="number" value="{{mobile}}"></input>
                 </view>
             </view>
             <view class="flex-row flex-y-center edit-row">
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project version=\"4\">\n  <component name=\"BranchesTreeState\">\n    <expand>\n      <path>\n        <item name=\"ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\n        <item name=\"LOCAL_ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\n      </path>\n      <path>\n        <item name=\"ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\n        <item name=\"REMOTE_ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\n      </path>\n      <path>\n        <item name=\"ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\n        <item name=\"REMOTE_ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\n        <item name=\"GROUP_NODE:origin\" type=\"e8cecc67:BranchNodeDescriptor\" />\n      </path>\n    </expand>\n    <select>\n      <path>\n        <item name=\"ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\n        <item name=\"LOCAL_ROOT\" type=\"e8cecc67:BranchNodeDescriptor\" />\n        <item name=\"BRANCH:gitcc\" type=\"e8cecc67:BranchNodeDescriptor\" />\n      </path>\n    </select>\n  </component>\n  <component name=\"ChangeListManager\">\n    <list default=\"true\" id=\"a0dac186-9019-463a-9c2e-c3fb3065d3d9\" name=\"默认更改列表\" comment=\"新增设置密码页面\">\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\n    </list>\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\n  </component>\n  <component name=\"ComposerSettings\">\n    <execution />\n  </component>\n  <component name=\"FileTemplateManagerImpl\">\n    <option name=\"RECENT_TEMPLATES\">\n      <list>\n        <option value=\"tsconfig.json\" />\n        <option value=\"package.json\" />\n      </list>\n    </option>\n  </component>\n  <component name=\"Git.Settings\">\n    <option name=\"RECENT_BRANCH_BY_REPOSITORY\">\n      <map>\n        <entry key=\"$PROJECT_DIR$\" value=\"gitcc\" />\n      </map>\n    </option>\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\n    <option name=\"UPDATE_TYPE\" value=\"REBASE\" />\n  </component>\n  <component name=\"ProjectId\" id=\"1kovTJiAtU3FWmmrKqoh8WmR75r\" />\n  <component name=\"ProjectViewState\">\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\n    <option name=\"showLibraryContents\" value=\"true\" />\n  </component>\n  <component name=\"PropertiesComponent\">\n    <property name=\"RunOnceActivity.OpenProjectViewOnStart\" value=\"true\" />\n    <property name=\"WebServerToolWindowFactoryState\" value=\"false\" />\n    <property name=\"aspect.path.notification.shown\" value=\"true\" />\n    <property name=\"last_opened_file_path\" value=\"$PROJECT_DIR$/pages\" />\n    <property name=\"node.js.detected.package.eslint\" value=\"true\" />\n    <property name=\"node.js.detected.package.tslint\" value=\"true\" />\n    <property name=\"node.js.path.for.package.eslint\" value=\"project\" />\n    <property name=\"node.js.path.for.package.tslint\" value=\"project\" />\n    <property name=\"node.js.selected.package.eslint\" value=\"(autodetect)\" />\n    <property name=\"node.js.selected.package.tslint\" value=\"(autodetect)\" />\n    <property name=\"nodejs_package_manager_path\" value=\"npm\" />\n    <property name=\"vue.rearranger.settings.migration\" value=\"true\" />\n  </component>\n  <component name=\"RecentsManager\">\n    <key name=\"CopyFile.RECENT_KEYS\">\n      <recent name=\"F:\\商城DIY\\gxit-muzi-renren-mall-wechat-master\\muzi-renren-mall-wechat\\pages\" />\n    </key>\n  </component>\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\n  <component name=\"TaskManager\">\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\n      <changelist id=\"a0dac186-9019-463a-9c2e-c3fb3065d3d9\" name=\"默认更改列表\" comment=\"\" />\n      <created>1606379764423</created>\n      <option name=\"number\" value=\"Default\" />\n      <option name=\"presentableId\" value=\"Default\" />\n      <updated>1606379764423</updated>\n      <workItem from=\"1606379765556\" duration=\"4577000\" />\n      <workItem from=\"1606397406491\" duration=\"15000\" />\n      <workItem from=\"1606437750963\" duration=\"4137000\" />\n      <workItem from=\"1606465712428\" duration=\"2021000\" />\n      <workItem from=\"1606629591158\" duration=\"2431000\" />\n      <workItem from=\"1606696186584\" duration=\"19888000\" />\n      <workItem from=\"1606783378952\" duration=\"16456000\" />\n      <workItem from=\"1606955688348\" duration=\"2124000\" />\n      <workItem from=\"1607307707212\" duration=\"77000\" />\n      <workItem from=\"1607387415429\" duration=\"2422000\" />\n      <workItem from=\"1607477160946\" duration=\"740000\" />\n      <workItem from=\"1607593847805\" duration=\"754000\" />\n      <workItem from=\"1607612792537\" duration=\"610000\" />\n      <workItem from=\"1607646877908\" duration=\"2994000\" />\n      <workItem from=\"1607949526714\" duration=\"12000\" />\n      <workItem from=\"1607953078061\" duration=\"646000\" />\n      <workItem from=\"1607992762967\" duration=\"12253000\" />\n      <workItem from=\"1608037121286\" duration=\"89000\" />\n      <workItem from=\"1608098200220\" duration=\"626000\" />\n      <workItem from=\"1608106680859\" duration=\"333000\" />\n      <workItem from=\"1608165912786\" duration=\"3512000\" />\n      <workItem from=\"1608350767693\" duration=\"677000\" />\n      <workItem from=\"1608532677306\" duration=\"1213000\" />\n      <workItem from=\"1608564535509\" duration=\"621000\" />\n      <workItem from=\"1608598085291\" duration=\"4294000\" />\n      <workItem from=\"1608683451661\" duration=\"1259000\" />\n      <workItem from=\"1608879067643\" duration=\"610000\" />\n      <workItem from=\"1608988911328\" duration=\"44000\" />\n      <workItem from=\"1609115864788\" duration=\"1695000\" />\n      <workItem from=\"1609516872004\" duration=\"3315000\" />\n      <workItem from=\"1609576870584\" duration=\"293000\" />\n      <workItem from=\"1609725623811\" duration=\"17313000\" />\n      <workItem from=\"1609830457549\" duration=\"2346000\" />\n      <workItem from=\"1609900128922\" duration=\"9324000\" />\n      <workItem from=\"1609983556117\" duration=\"1004000\" />\n      <workItem from=\"1610077058572\" duration=\"1506000\" />\n      <workItem from=\"1610092410283\" duration=\"807000\" />\n      <workItem from=\"1610325771719\" duration=\"748000\" />\n      <workItem from=\"1610677719175\" duration=\"359000\" />\n      <workItem from=\"1610689383082\" duration=\"1753000\" />\n      <workItem from=\"1610934786493\" duration=\"1934000\" />\n      <workItem from=\"1610937576463\" duration=\"7994000\" />\n    </task>\n    <task id=\"LOCAL-00001\" summary=\"更新积分商城中分类\">\n      <created>1606469250408</created>\n      <option name=\"number\" value=\"00001\" />\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1606469250408</updated>\n    </task>\n    <task id=\"LOCAL-00002\" summary=\"界面\">\n      <created>1606716329300</created>\n      <option name=\"number\" value=\"00002\" />\n      <option name=\"presentableId\" value=\"LOCAL-00002\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1606716329301</updated>\n    </task>\n    <task id=\"LOCAL-00003\" summary=\"订阅消息\">\n      <created>1606727833134</created>\n      <option name=\"number\" value=\"00003\" />\n      <option name=\"presentableId\" value=\"LOCAL-00003\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1606727833134</updated>\n    </task>\n    <task id=\"LOCAL-00004\" summary=\"增加了订阅信息的授权\">\n      <created>1607313675982</created>\n      <option name=\"number\" value=\"00004\" />\n      <option name=\"presentableId\" value=\"LOCAL-00004\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1607313675982</updated>\n    </task>\n    <task id=\"LOCAL-00005\" summary=\"修改数据\">\n      <created>1607910564028</created>\n      <option name=\"number\" value=\"00005\" />\n      <option name=\"presentableId\" value=\"LOCAL-00005\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1607910564028</updated>\n    </task>\n    <task id=\"LOCAL-00006\" summary=\"修改数据\">\n      <created>1607910690522</created>\n      <option name=\"number\" value=\"00006\" />\n      <option name=\"presentableId\" value=\"LOCAL-00006\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1607910690522</updated>\n    </task>\n    <task id=\"LOCAL-00007\" summary=\"修改了pages下的是个文件，分别是A开头的和C开头的，现在做到Cart(购物车) 文件\">\n      <created>1607935226891</created>\n      <option name=\"number\" value=\"00007\" />\n      <option name=\"presentableId\" value=\"LOCAL-00007\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1607935226891</updated>\n    </task>\n    <task id=\"LOCAL-00008\" summary=\"更新了DIY模块,已经更新了分销商中数据的显示问题\">\n      <created>1608026494465</created>\n      <option name=\"number\" value=\"00008\" />\n      <option name=\"presentableId\" value=\"LOCAL-00008\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1608026494465</updated>\n    </task>\n    <task id=\"LOCAL-00009\" summary=\"增加了密码支付功能\">\n      <created>1609746339570</created>\n      <option name=\"number\" value=\"00009\" />\n      <option name=\"presentableId\" value=\"LOCAL-00009\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1609746339570</updated>\n    </task>\n    <task id=\"LOCAL-00010\" summary=\"新增设置密码页面\">\n      <created>1610950221645</created>\n      <option name=\"number\" value=\"00010\" />\n      <option name=\"presentableId\" value=\"LOCAL-00010\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1610950221645</updated>\n    </task>\n    <option name=\"localTasksCounter\" value=\"11\" />\n    <servers />\n  </component>\n  <component name=\"TypeScriptGeneratedFilesManager\">\n    <option name=\"version\" value=\"3\" />\n  </component>\n  <component name=\"Vcs.Log.Tabs.Properties\">\n    <option name=\"TAB_STATES\">\n      <map>\n        <entry key=\"MAIN\">\n          <value>\n            <State>\n              <option name=\"FILTERS\">\n                <map>\n                  <entry key=\"branch\">\n                    <value>\n                      <list>\n                        <option value=\"gitcc\" />\n                      </list>\n                    </value>\n                  </entry>\n                </map>\n              </option>\n            </State>\n          </value>\n        </entry>\n      </map>\n    </option>\n    <option name=\"oldMeFiltersMigrated\" value=\"true\" />\n  </component>\n  <component name=\"VcsManagerConfiguration\">\n    <MESSAGE value=\"更新积分商城中分类\" />\n    <MESSAGE value=\"界面\" />\n    <MESSAGE value=\"订阅消息\" />\n    <MESSAGE value=\"增加了订阅信息的授权\" />\n    <MESSAGE value=\"修改数据\" />\n    <MESSAGE value=\"修改了pages下的是个文件，分别是A开头的和C开头的，现在做到Cart(购物车) 文件\" />\n    <MESSAGE value=\"更新了DIY模块,已经更新了分销商中数据的显示问题\" />\n    <MESSAGE value=\"增加了密码支付功能\" />\n    <MESSAGE value=\"新增设置密码页面\" />\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"新增设置密码页面\" />\n  </component>\n  <component name=\"WindowStateProjectService\">\n    <state x=\"2404\" y=\"159\" key=\"#com.intellij.execution.impl.EditConfigurationsDialog\" timestamp=\"1608708135432\">\n      <screen x=\"1920\" y=\"0\" width=\"1920\" height=\"1040\" />\n    </state>\n    <state x=\"2404\" y=\"159\" key=\"#com.intellij.execution.impl.EditConfigurationsDialog/0.0.1536.824/1920.0.1920.1040@1920.0.1920.1040\" timestamp=\"1608708135432\" />\n    <state x=\"549\" y=\"167\" key=\"FileChooserDialogImpl\" timestamp=\"1610092535395\">\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\n    </state>\n    <state x=\"549\" y=\"167\" key=\"FileChooserDialogImpl/0.0.1536.824/1920.0.1920.1040@0.0.1536.824\" timestamp=\"1610092535395\" />\n    <state x=\"2606\" y=\"211\" key=\"FileChooserDialogImpl/0.0.1536.824/1920.0.1920.1040@1920.0.1920.1040\" timestamp=\"1609143471585\" />\n    <state x=\"549\" y=\"167\" key=\"FileChooserDialogImpl/0.0.1536.824@0.0.1536.824\" timestamp=\"1608988946322\" />\n    <state x=\"686\" y=\"211\" key=\"FileChooserDialogImpl/0.0.1920.1040/1920.0.1920.1040@0.0.1920.1040\" timestamp=\"1606960049480\" />\n    <state x=\"593\" y=\"255\" key=\"IDE.errors.dialog\" timestamp=\"1606898750590\">\n      <screen x=\"0\" y=\"0\" width=\"1920\" height=\"1040\" />\n    </state>\n    <state x=\"593\" y=\"255\" key=\"IDE.errors.dialog/0.0.1920.1040/1920.0.1920.1040@0.0.1920.1040\" timestamp=\"1606898750590\" />\n    <state x=\"294\" y=\"93\" key=\"MergeDialog\" timestamp=\"1607910758055\">\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\n    </state>\n    <state x=\"294\" y=\"93\" key=\"MergeDialog/0.0.1536.824/1920.0.1920.1040@0.0.1536.824\" timestamp=\"1607910758055\" />\n    <state x=\"368\" y=\"118\" key=\"MergeDialog/0.0.1920.1040/1920.0.1920.1040@0.0.1920.1040\" timestamp=\"1607307742102\" />\n    <state x=\"405\" y=\"173\" key=\"MultipleFileMergeDialog\" timestamp=\"1607910759892\">\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\n    </state>\n    <state x=\"405\" y=\"173\" key=\"MultipleFileMergeDialog/0.0.1536.824/1920.0.1920.1040@0.0.1536.824\" timestamp=\"1607910759892\" />\n    <state width=\"498\" height=\"446\" key=\"SwitcherDM\" timestamp=\"1606789637136\">\n      <screen x=\"1920\" y=\"0\" width=\"1920\" height=\"1040\" />\n    </state>\n    <state width=\"498\" height=\"446\" key=\"SwitcherDM/0.0.1536.824/1920.0.1920.1040@1920.0.1920.1040\" timestamp=\"1606789637136\" />\n    <state x=\"467\" y=\"127\" key=\"VCS.ChangeListViewerDialog\" timestamp=\"1607910719546\">\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\n    </state>\n    <state x=\"467\" y=\"127\" key=\"VCS.ChangeListViewerDialog/0.0.1536.824/1920.0.1920.1040@0.0.1536.824\" timestamp=\"1607910719546\" />\n    <state x=\"361\" y=\"145\" key=\"Vcs.Push.Dialog.v2\" timestamp=\"1610950225213\">\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\n    </state>\n    <state x=\"361\" y=\"145\" key=\"Vcs.Push.Dialog.v2/0.0.1536.824/1920.0.1920.1040@0.0.1536.824\" timestamp=\"1610950225213\" />\n    <state x=\"361\" y=\"145\" key=\"Vcs.Push.Dialog.v2/0.0.1536.824@0.0.1536.824\" timestamp=\"1607313677119\" />\n    <state x=\"726\" y=\"444\" key=\"com.intellij.openapi.vcs.update.UpdateOrStatusOptionsDialogupdate-v2\" timestamp=\"1607935131938\">\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\n    </state>\n    <state x=\"726\" y=\"444\" key=\"com.intellij.openapi.vcs.update.UpdateOrStatusOptionsDialogupdate-v2/0.0.1536.824/1920.0.1920.1040@0.0.1536.824\" timestamp=\"1607935131938\" />\n    <state x=\"907\" y=\"560\" key=\"com.intellij.openapi.vcs.update.UpdateOrStatusOptionsDialogupdate-v2/0.0.1920.1040/1920.0.1920.1040@0.0.1920.1040\" timestamp=\"1607307720660\" />\n    <state x=\"483\" y=\"124\" key=\"git4idea.branch.GitSmartOperationDialog\" timestamp=\"1607910508267\">\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\n    </state>\n    <state x=\"483\" y=\"124\" key=\"git4idea.branch.GitSmartOperationDialog/0.0.1536.824/1920.0.1920.1040@0.0.1536.824\" timestamp=\"1607910508267\" />\n    <state x=\"425\" y=\"187\" key=\"run.anything.popup\" timestamp=\"1607915975830\">\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\n    </state>\n    <state x=\"425\" y=\"187\" key=\"run.anything.popup/0.0.1536.824/1920.0.1920.1040@0.0.1536.824\" timestamp=\"1607915975830\" />\n    <state x=\"425\" y=\"187\" key=\"run.anything.popup/0.0.1536.824@0.0.1536.824\" timestamp=\"1607320388195\" />\n    <state x=\"431\" y=\"145\" width=\"672\" height=\"678\" key=\"search.everywhere.popup\" timestamp=\"1610950402209\">\n      <screen x=\"0\" y=\"0\" width=\"1536\" height=\"824\" />\n    </state>\n    <state x=\"431\" y=\"145\" width=\"672\" height=\"678\" key=\"search.everywhere.popup/0.0.1536.824/1920.0.1920.1040@0.0.1536.824\" timestamp=\"1610950402209\" />\n    <state x=\"431\" y=\"145\" width=\"672\" height=\"678\" key=\"search.everywhere.popup/0.0.1536.824@0.0.1536.824\" timestamp=\"1607313308270\" />\n  </component>\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	
+++ b/.idea/workspace.xml	
@@ -26,7 +26,59 @@
   </component>
   <component name="ChangeListManager">
     <list default="true" id="a0dac186-9019-463a-9c2e-c3fb3065d3d9" name="默认更改列表" comment="新增设置密码页面">
+      <change beforePath="$PROJECT_DIR$/.idea/codeStyles/codeStyleConfig.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/codeStyles/codeStyleConfig.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/.idea/modules.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/modules.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/.idea/muzi-renren-mall-wechat.iml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/muzi-renren-mall-wechat.iml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/.idea/vcs.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/vcs.xml" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/app.json" beforeDir="false" afterPath="$PROJECT_DIR$/app.json" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/bargain/activity/activity.js" beforeDir="false" afterPath="$PROJECT_DIR$/bargain/activity/activity.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/bargain/activity/activity.wxml" beforeDir="false" afterPath="$PROJECT_DIR$/bargain/activity/activity.wxml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/bargain/commons/time.js" beforeDir="false" afterPath="$PROJECT_DIR$/bargain/commons/time.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/bargain/goods/goods.js" beforeDir="false" afterPath="$PROJECT_DIR$/bargain/goods/goods.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/components/quick-navigation/quick-navigation.wxml" beforeDir="false" afterPath="$PROJECT_DIR$/components/quick-navigation/quick-navigation.wxml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/core/api.js" beforeDir="false" afterPath="$PROJECT_DIR$/core/api.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/core/config.js" beforeDir="false" afterPath="$PROJECT_DIR$/core/config.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/core/const.js" beforeDir="false" afterPath="$PROJECT_DIR$/core/const.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/core/getUser.js" beforeDir="false" afterPath="$PROJECT_DIR$/core/getUser.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/core/login.js" beforeDir="false" afterPath="$PROJECT_DIR$/core/login.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/core/order-pay.js" beforeDir="false" afterPath="$PROJECT_DIR$/core/order-pay.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/core/page.js" beforeDir="false" afterPath="$PROJECT_DIR$/core/page.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/core/request.js" beforeDir="false" afterPath="$PROJECT_DIR$/core/request.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/ext.json" beforeDir="false" afterPath="$PROJECT_DIR$/ext.json" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/add-share/index.js" beforeDir="false" afterPath="$PROJECT_DIR$/pages/add-share/index.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/add-share/index.wxml" beforeDir="false" afterPath="$PROJECT_DIR$/pages/add-share/index.wxml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/address-edit/address-edit.js" beforeDir="false" afterPath="$PROJECT_DIR$/pages/address-edit/address-edit.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/address-edit/address-edit.wxml" beforeDir="false" afterPath="$PROJECT_DIR$/pages/address-edit/address-edit.wxml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/address-picker/address-picker.wxml" beforeDir="false" afterPath="$PROJECT_DIR$/pages/address-picker/address-picker.wxml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/address/address.wxml" beforeDir="false" afterPath="$PROJECT_DIR$/pages/address/address.wxml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/balance/balance.js" beforeDir="false" afterPath="$PROJECT_DIR$/pages/balance/balance.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/balance/balance.wxml" beforeDir="false" afterPath="$PROJECT_DIR$/pages/balance/balance.wxml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/balance/detail.wxml" beforeDir="false" afterPath="$PROJECT_DIR$/pages/balance/detail.wxml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/bangding/bangding.wxml" beforeDir="false" afterPath="$PROJECT_DIR$/pages/bangding/bangding.wxml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/book/submit/submit.js" beforeDir="false" afterPath="$PROJECT_DIR$/pages/book/submit/submit.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/cash/cash.js" beforeDir="false" afterPath="$PROJECT_DIR$/pages/cash/cash.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/index/index.wxml" beforeDir="false" afterPath="$PROJECT_DIR$/pages/index/index.wxml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/integral-mall/index/index.js" beforeDir="false" afterPath="$PROJECT_DIR$/pages/integral-mall/index/index.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/integral-mall/index/index.wxml" beforeDir="false" afterPath="$PROJECT_DIR$/pages/integral-mall/index/index.wxml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/miaosha/order-detail/order-detail.js" beforeDir="false" afterPath="$PROJECT_DIR$/pages/miaosha/order-detail/order-detail.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/miaosha/order-detail/order-detail.wxml" beforeDir="false" afterPath="$PROJECT_DIR$/pages/miaosha/order-detail/order-detail.wxml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/new-order-submit/new-order-submit.js" beforeDir="false" afterPath="$PROJECT_DIR$/pages/new-order-submit/new-order-submit.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/order-detail/order-detail.js" beforeDir="false" afterPath="$PROJECT_DIR$/pages/order-detail/order-detail.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/order-detail/order-detail.wxml" beforeDir="false" afterPath="$PROJECT_DIR$/pages/order-detail/order-detail.wxml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/order/order.js" beforeDir="false" afterPath="$PROJECT_DIR$/pages/order/order.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/order/order.wxml" beforeDir="false" afterPath="$PROJECT_DIR$/pages/order/order.wxml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/pt/group/details.js" beforeDir="false" afterPath="$PROJECT_DIR$/pages/pt/group/details.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/pt/group/details.wxml" beforeDir="false" afterPath="$PROJECT_DIR$/pages/pt/group/details.wxml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/set-pwd/set-pwd.js" beforeDir="false" afterPath="$PROJECT_DIR$/pages/set-pwd/set-pwd.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/set-pwd/set-pwd.json" beforeDir="false" afterPath="$PROJECT_DIR$/pages/set-pwd/set-pwd.json" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/set-pwd/set-pwd.wxml" beforeDir="false" afterPath="$PROJECT_DIR$/pages/set-pwd/set-pwd.wxml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/set-pwd/set-pwd.wxss" beforeDir="false" afterPath="$PROJECT_DIR$/pages/set-pwd/set-pwd.wxss" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/user/user.js" beforeDir="false" afterPath="$PROJECT_DIR$/pages/user/user.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pages/user/user.wxml" beforeDir="false" afterPath="$PROJECT_DIR$/pages/user/user.wxml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/pond/pond/pond.js" beforeDir="false" afterPath="$PROJECT_DIR$/pond/pond/pond.js" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/project.config.json" beforeDir="false" afterPath="$PROJECT_DIR$/project.config.json" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/siteinfo.js" beforeDir="false" afterPath="$PROJECT_DIR$/siteinfo.js" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
@@ -60,9 +112,10 @@
   </component>
   <component name="PropertiesComponent">
     <property name="RunOnceActivity.OpenProjectViewOnStart" value="true" />
+    <property name="RunOnceActivity.ShowReadmeOnStart" value="true" />
     <property name="WebServerToolWindowFactoryState" value="false" />
     <property name="aspect.path.notification.shown" value="true" />
-    <property name="last_opened_file_path" value="$PROJECT_DIR$/pages" />
+    <property name="last_opened_file_path" value="$PROJECT_DIR$" />
     <property name="node.js.detected.package.eslint" value="true" />
     <property name="node.js.detected.package.tslint" value="true" />
     <property name="node.js.path.for.package.eslint" value="project" />
@@ -70,6 +123,7 @@
     <property name="node.js.selected.package.eslint" value="(autodetect)" />
     <property name="node.js.selected.package.tslint" value="(autodetect)" />
     <property name="nodejs_package_manager_path" value="npm" />
+    <property name="settings.editor.selected.configurable" value="vcs.Git" />
     <property name="vue.rearranger.settings.migration" value="true" />
   </component>
   <component name="RecentsManager">
@@ -126,7 +180,31 @@
       <workItem from="1610677719175" duration="359000" />
       <workItem from="1610689383082" duration="1753000" />
       <workItem from="1610934786493" duration="1934000" />
-      <workItem from="1610937576463" duration="7994000" />
+      <workItem from="1610937576463" duration="21296000" />
+      <workItem from="1610973240264" duration="4019000" />
+      <workItem from="1611017621206" duration="2548000" />
+      <workItem from="1611199535461" duration="1832000" />
+      <workItem from="1611219549038" duration="611000" />
+      <workItem from="1611277305429" duration="129000" />
+      <workItem from="1611564144878" duration="728000" />
+      <workItem from="1611581839773" duration="909000" />
+      <workItem from="1611623486853" duration="2376000" />
+      <workItem from="1611727333913" duration="12000" />
+      <workItem from="1611801216467" duration="1432000" />
+      <workItem from="1611813637447" duration="2758000" />
+      <workItem from="1611882172194" duration="14481000" />
+      <workItem from="1612141419419" duration="4286000" />
+      <workItem from="1612227959808" duration="3982000" />
+      <workItem from="1612313838899" duration="308000" />
+      <workItem from="1612332735106" duration="1194000" />
+      <workItem from="1612400204519" duration="4756000" />
+      <workItem from="1612486273170" duration="637000" />
+      <workItem from="1612666561684" duration="1793000" />
+      <workItem from="1612685521315" duration="316000" />
+      <workItem from="1612685847769" duration="494000" />
+      <workItem from="1612764619714" duration="1648000" />
+      <workItem from="1613783568272" duration="14000" />
+      <workItem from="1615963522426" duration="578000" />
     </task>
     <task id="LOCAL-00001" summary="更新积分商城中分类">
       <created>1606469250408</created>
@@ -198,7 +276,14 @@
       <option name="project" value="LOCAL" />
       <updated>1610950221645</updated>
     </task>
-    <option name="localTasksCounter" value="11" />
+    <task id="LOCAL-00011" summary="新增设置密码页面">
+      <created>1610950777048</created>
+      <option name="number" value="00011" />
+      <option name="presentableId" value="LOCAL-00011" />
+      <option name="project" value="LOCAL" />
+      <updated>1610950777048</updated>
+    </task>
+    <option name="localTasksCounter" value="12" />
     <servers />
   </component>
   <component name="TypeScriptGeneratedFilesManager">
@@ -240,62 +325,4 @@
     <MESSAGE value="新增设置密码页面" />
     <option name="LAST_COMMIT_MESSAGE" value="新增设置密码页面" />
   </component>
-  <component name="WindowStateProjectService">
-    <state x="2404" y="159" key="#com.intellij.execution.impl.EditConfigurationsDialog" timestamp="1608708135432">
-      <screen x="1920" y="0" width="1920" height="1040" />
-    </state>
-    <state x="2404" y="159" key="#com.intellij.execution.impl.EditConfigurationsDialog/0.0.1536.824/1920.0.1920.1040@1920.0.1920.1040" timestamp="1608708135432" />
-    <state x="549" y="167" key="FileChooserDialogImpl" timestamp="1610092535395">
-      <screen x="0" y="0" width="1536" height="824" />
-    </state>
-    <state x="549" y="167" key="FileChooserDialogImpl/0.0.1536.824/1920.0.1920.1040@0.0.1536.824" timestamp="1610092535395" />
-    <state x="2606" y="211" key="FileChooserDialogImpl/0.0.1536.824/1920.0.1920.1040@1920.0.1920.1040" timestamp="1609143471585" />
-    <state x="549" y="167" key="FileChooserDialogImpl/0.0.1536.824@0.0.1536.824" timestamp="1608988946322" />
-    <state x="686" y="211" key="FileChooserDialogImpl/0.0.1920.1040/1920.0.1920.1040@0.0.1920.1040" timestamp="1606960049480" />
-    <state x="593" y="255" key="IDE.errors.dialog" timestamp="1606898750590">
-      <screen x="0" y="0" width="1920" height="1040" />
-    </state>
-    <state x="593" y="255" key="IDE.errors.dialog/0.0.1920.1040/1920.0.1920.1040@0.0.1920.1040" timestamp="1606898750590" />
-    <state x="294" y="93" key="MergeDialog" timestamp="1607910758055">
-      <screen x="0" y="0" width="1536" height="824" />
-    </state>
-    <state x="294" y="93" key="MergeDialog/0.0.1536.824/1920.0.1920.1040@0.0.1536.824" timestamp="1607910758055" />
-    <state x="368" y="118" key="MergeDialog/0.0.1920.1040/1920.0.1920.1040@0.0.1920.1040" timestamp="1607307742102" />
-    <state x="405" y="173" key="MultipleFileMergeDialog" timestamp="1607910759892">
-      <screen x="0" y="0" width="1536" height="824" />
-    </state>
-    <state x="405" y="173" key="MultipleFileMergeDialog/0.0.1536.824/1920.0.1920.1040@0.0.1536.824" timestamp="1607910759892" />
-    <state width="498" height="446" key="SwitcherDM" timestamp="1606789637136">
-      <screen x="1920" y="0" width="1920" height="1040" />
-    </state>
-    <state width="498" height="446" key="SwitcherDM/0.0.1536.824/1920.0.1920.1040@1920.0.1920.1040" timestamp="1606789637136" />
-    <state x="467" y="127" key="VCS.ChangeListViewerDialog" timestamp="1607910719546">
-      <screen x="0" y="0" width="1536" height="824" />
-    </state>
-    <state x="467" y="127" key="VCS.ChangeListViewerDialog/0.0.1536.824/1920.0.1920.1040@0.0.1536.824" timestamp="1607910719546" />
-    <state x="361" y="145" key="Vcs.Push.Dialog.v2" timestamp="1610950225213">
-      <screen x="0" y="0" width="1536" height="824" />
-    </state>
-    <state x="361" y="145" key="Vcs.Push.Dialog.v2/0.0.1536.824/1920.0.1920.1040@0.0.1536.824" timestamp="1610950225213" />
-    <state x="361" y="145" key="Vcs.Push.Dialog.v2/0.0.1536.824@0.0.1536.824" timestamp="1607313677119" />
-    <state x="726" y="444" key="com.intellij.openapi.vcs.update.UpdateOrStatusOptionsDialogupdate-v2" timestamp="1607935131938">
-      <screen x="0" y="0" width="1536" height="824" />
-    </state>
-    <state x="726" y="444" key="com.intellij.openapi.vcs.update.UpdateOrStatusOptionsDialogupdate-v2/0.0.1536.824/1920.0.1920.1040@0.0.1536.824" timestamp="1607935131938" />
-    <state x="907" y="560" key="com.intellij.openapi.vcs.update.UpdateOrStatusOptionsDialogupdate-v2/0.0.1920.1040/1920.0.1920.1040@0.0.1920.1040" timestamp="1607307720660" />
-    <state x="483" y="124" key="git4idea.branch.GitSmartOperationDialog" timestamp="1607910508267">
-      <screen x="0" y="0" width="1536" height="824" />
-    </state>
-    <state x="483" y="124" key="git4idea.branch.GitSmartOperationDialog/0.0.1536.824/1920.0.1920.1040@0.0.1536.824" timestamp="1607910508267" />
-    <state x="425" y="187" key="run.anything.popup" timestamp="1607915975830">
-      <screen x="0" y="0" width="1536" height="824" />
-    </state>
-    <state x="425" y="187" key="run.anything.popup/0.0.1536.824/1920.0.1920.1040@0.0.1536.824" timestamp="1607915975830" />
-    <state x="425" y="187" key="run.anything.popup/0.0.1536.824@0.0.1536.824" timestamp="1607320388195" />
-    <state x="431" y="145" width="672" height="678" key="search.everywhere.popup" timestamp="1610950402209">
-      <screen x="0" y="0" width="1536" height="824" />
-    </state>
-    <state x="431" y="145" width="672" height="678" key="search.everywhere.popup/0.0.1536.824/1920.0.1920.1040@0.0.1536.824" timestamp="1610950402209" />
-    <state x="431" y="145" width="672" height="678" key="search.everywhere.popup/0.0.1536.824@0.0.1536.824" timestamp="1607313308270" />
-  </component>
 </project>
\ No newline at end of file
Index: pages/order-detail/order-detail.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>var app = getApp(), api = getApp().api;\n\nPage({\n    data: {\n        isPageShow: !1,\n        order: null,\n        getGoodsTotalPrice: function() {\n            return this.data.order.total_price;\n        }\n    },\n    onLoad: function(e) {\n        getApp().page.onLoad(this, e);\n        var t = this;\n        getApp().core.showLoading({\n            title: \"正在加载\"\n        });\n        var o = getCurrentPages(), a = o[o.length - 2];\n        getApp().request({\n            url: getApp().api.order.detail,\n            data: {\n                order_id: e.id,\n                route: a.route\n            },\n            success: function(e) {\n                0 == e.code && t.setData({\n                    order: e.data,\n                    isPageShow: !0\n                });\n            },\n            complete: function() {\n                getApp().core.hideLoading();\n            }\n        });\n    },\n    copyText: function(e) {\n        var t = e.currentTarget.dataset.text;\n        getApp().core.setClipboardData({\n            data: t,\n            success: function() {\n                getApp().core.showToast({\n                    title: \"已复制\"\n                });\n            }\n        });\n    },\n    location: function() {\n        var e = this.data.order.shop;\n        getApp().core.openLocation({\n            latitude: parseFloat(e.latitude),\n            longitude: parseFloat(e.longitude),\n            address: e.address,\n            name: e.name\n        });\n    },\n    orderRevoke: function(t) {\n        var o = this;\n        getApp().core.showModal({\n            title: \"提示\",\n            content: \"是否退款该订单？\",\n            cancelText: \"否\",\n            confirmText: \"是\",\n            success: function(e) {\n                if (e.cancel) return !0;\n                e.confirm && (getApp().core.showLoading({\n                    title: \"操作中\"\n                }), getApp().request({\n                    url: getApp().api.order.revoke,\n                    data: {\n                        order_id: t.currentTarget.dataset.id\n                    },\n                    success: function(e) {\n                        getApp().core.hideLoading(), getApp().core.showModal({\n                            title: \"提示\",\n                            content: e.msg,\n                            showCancel: !1,\n                            success: function(e) {\n                                e.confirm && o.onLoad({\n                                    id: o.data.order.order_id\n                                });\n                            }\n                        });\n                    }\n                }));\n            }\n        });\n    }\n});
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/pages/order-detail/order-detail.js b/pages/order-detail/order-detail.js
--- a/pages/order-detail/order-detail.js	
+++ b/pages/order-detail/order-detail.js	
@@ -22,6 +22,7 @@
                 route: a.route
             },
             success: function(e) {
+                console.log(e)
                 0 == e.code && t.setData({
                     order: e.data,
                     isPageShow: !0
Index: pages/order-detail/order-detail.wxml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><view class=\"page\">\n    <include src=\"/components/common/common\"></include>\n    <include src=\"/components/header/header\"></include>\n    <view class=\"body after-navber\" wx:if=\"{{isPageShow}}\">\n        <view style=\"overflow-x: hidden\">\n            <view class=\"status-bar\">\n                <image mode=\"aspectFill\" src=\"{{__wxapp_img.store.order_status_bar.url}}\"></image>\n                <text>{{order.status}}</text>\n            </view>\n            <navigator class=\"block flex-row\" url=\"/pages/express-detail/express-detail?id={{order.order_id}}&order_type={{order.order_type}}\" wx:if=\"{{order.express_no&&order.is_send==1}}\">\n                <view class=\"flex-grow-1\">\n                    <view class=\"mb-10\">快递公司：{{order.express}}</view>\n                    <view class=\"\">快递单号：{{order.express_no}}</view>\n                </view>\n                <view class=\"flex-grow-0 flex-y-center\">\n                    <image src=\"{{__wxapp_img.store.jiantou_r.url}}\" style=\"width: 12rpx;height: 22rpx\"></image>\n                </view>\n                <view class=\"block-row flex-row\" wx:if=\"{{false}}\">\n                    <view class=\"flex-grow-1\">快递单号：{{order.express_no}}</view>\n                    <view class=\"flex-grow-0\">\n                        <text bindtap=\"copyText\" class=\"copy-text-btn\" data-text=\"{{order.express_no}}\">复制</text>\n                    </view>\n                </view>\n            </navigator>\n            <view class=\"block\">\n                <view class=\"flex-row block-row\">\n                    <view class=\"flex-grow-1\">\n                        {{order.is_offline==0?'联系人：':'收货人：'}}{{order.name}}\n                    </view>\n                    <view class=\"flex-grow-0\">\n                        {{order.mobile}}\n                    </view>\n                </view>\n                <view wx:if=\"{{order.address}}\">收货地址：{{order.address}}</view>\n            </view>\n            <view class=\"block flex-row\" wx:if=\"{{order.is_offline==1}}\">\n                <view class=\"flex-grow-1\">\n                    <view class=\"flex-grow-1\">门店名称：{{order.shop.name}}</view>\n                    <view class=\"flex-grow-1\">联系电话：{{order.shop.mobile}}</view>\n                    <view class=\"flex-grow-1\">门店地址：{{order.shop.address}}</view>\n                </view>\n                <view class=\"flex-grow-0 flex-y-center\" wx:if=\"{{order.shop.longitude}}\">\n                    <text bindtap=\"location\" class=\"copy-text-btn\">导航</text>\n                </view>\n            </view>\n            <view class=\"block\">\n                <view class=\"block-row flex-row\">\n                    <view class=\"flex-grow-1\">订单编号：{{order.order_no}}</view>\n                    <view class=\"flex-grow-0\">\n                        <text bindtap=\"copyText\" class=\"copy-text-btn\" data-text=\"{{order.order_no}}\">复制</text>\n                    </view>\n                </view>\n                <view>下单时间：{{order.addtime}}</view>\n                <view class=\"pay-type\">{{order.pay_type_text}}</view>\n            </view>\n            <view class=\"block\">\n                <view class=\"flex-row block-row\">\n                    <view class=\"flex-grow-1\">商品总额</view>\n                    <view class=\"flex-grow-0\" wx:if=\"{{order}}\">￥{{order.goods_total_price}}</view>\n                    <view class=\"flex-grow-0\" wx:else>￥0.00</view>\n                </view>\n                <view class=\"flex-row block-row\">\n                    <view class=\"flex-grow-1\">商品数量</view>\n                    <view class=\"flex-grow-0\">×{{order.num}}</view>\n                </view>\n                <view class=\"flex-row block-row\" wx:if=\"{{user_coupon_id}}\">\n                    <view class=\"flex-grow-1\">优惠券优惠</view>\n                    <view class=\"flex-grow-0\">-￥{{order.coupon_sub_price}}</view>\n                </view>\n                <view class=\"flex-row block-row\" wx:if=\"{{order.integral&&order.integral.forehead>0}}\">\n                    <view class=\"flex-grow-1\">积分抵扣</view>\n                    <view class=\"flex-grow-0\">-￥{{order.integral.forehead}}</view>\n                </view>\n                <view class=\"flex-row block-row\" wx:if=\"{{order.discount<10&&order.discount}}\">\n                    <view class=\"flex-grow-1\">会员折扣</view>\n                    <view class=\"flex-grow-0\">{{order.discount}}折</view>\n                </view>\n                <view class=\"flex-row block-row\" wx:if=\"{{order.before_update}}\">\n                    <view class=\"flex-grow-1\">{{order.before_update}}</view>\n                    <view class=\"flex-grow-0\">￥{{order.money}}</view>\n                </view>\n                <view class=\"flex-row block-row\" wx:if=\"{{order.colonel}}\">\n                    <view class=\"flex-grow-1\">团长优惠</view>\n                    <view class=\"flex-grow-0\">￥{{order.colonel}}</view>\n                </view>\n                <view class=\"flex-row block-row\">\n                    <view class=\"flex-grow-1\">运费</view>\n                    <view class=\"flex-grow-0\">￥{{order.express_price}}</view>\n                </view>\n                <view wx:if=\"{{order.content}}\">\n                    <view>买家留言</view>\n                    <view style=\"width:100%;overflow:auto;word-wrap:break-word;\">{{order.content}}</view>\n                </view>\n                <view wx:if=\"{{order.words}}\">\n                    <view>商家留言</view>\n                    <view class=\"fs-sm\" style=\"width:100%;overflow:auto;word-wrap:break-word;\">{{order.words}}</view>\n                </view>\n                <view class=\"block-footer\">合计：\n                    <text style=\"color: #ff4544\">￥{{order.pay_price}}</text>\n                </view>\n            </view>\n            <view class=\"block\">\n                <view class=\"flex-row goods-item\" wx:for=\"{{order.goods_list}}\" wx:key=\"{{item.id}}\">\n                    <view class=\"flex-grow-0\">\n                        <navigator style=\"font-size: 0\" url=\"/pages/goods/goods?id={{item.goods_id}}\">\n                            <image mode=\"aspectFill\" src=\"{{item.goods_pic}}\" style=\"width: 156rpx;height: 156rpx\"></image>\n                        </navigator>\n                    </view>\n                    <view class=\"flex-grow-1\" style=\"padding-left: 20rpx\">\n                        <view style=\"margin-bottom: 10rpx\">\n                            <navigator url=\"/pages/goods/goods?id={{item.goods_id}}\">{{item.name}}</navigator>\n                        </view>\n                        <view class=\"flex-row\">\n                            <view class=\"flex-grow-1\">\n                                <view style=\"font-size: 9pt;color: #888;margin-right: 20rpx;display: inline-block\" wx:for=\"{{item.attr}}\" wx:for-item=\"attr\" wx:key=\"{{attr.id}}\">\n                                    {{attr.attr_group_name}}：{{attr.attr_name}}\n                                </view>\n                            </view>\n                            <view class=\"flex-grow-0\" style=\"text-align: right\">\n                                <view>×{{item.num}}</view>\n                                <view style=\"color: #ff4544\">￥：{{item.total_price}}</view>\n                            </view>\n                        </view>\n                        <view style=\"color:#ff4544;text-align:right;font-size:9pt\" wx:if=\"{{item.is_level&&item.is_level==1}}\">享受会员折扣</view>\n                        <view wx:if=\"{{item.order_refund_enable==1}}\">\n                            <navigator class=\"flex-y-center refund-btn\" url=\"/pages/order-refund/order-refund?id={{item.order_detail_id}}\" >申请售后\n                            </navigator>\n\n<!--                            <text class=\"refund-text\" wx:if=\"{{item.is_order_refund==1}}\">已申请售后</text> wx:if=\"{{item.is_order_refund==0}}\" -->\n                        </view>\n                    </view>\n                </view>\n            </view>\n            <view class=\"order-footer flex-y-center flex-x-right flex-row\" wx:if=\"{{order.is_send==0&&order.apply_delete==1}}\">\n                <view>退款申请中</view>\n            </view>\n            <view class=\"order-footer flex-y-center flex-x-right flex-row\" wx:if=\"{{order.is_send==0&&order.is_pay==1&&order.apply_delete==0}}\">\n                <view class=\"play-btn\">\n                    <view bindtap=\"orderRevoke\" data-id=\"{{order.order_id}}\">申请退款\n                    </view>\n                </view>\n            </view>\n        </view>\n    </view>\n    <include src=\"/components/footer/footer\"></include>\n</view>\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/pages/order-detail/order-detail.wxml b/pages/order-detail/order-detail.wxml
--- a/pages/order-detail/order-detail.wxml	
+++ b/pages/order-detail/order-detail.wxml	
@@ -1,6 +1,6 @@
 <view class="page">
-    <include src="/components/common/common"></include>
-    <include src="/components/header/header"></include>
+    <include src="/components/common/common.wxml"></include>
+    <include src="/components/header/header.wxml"></include>
     <view class="body after-navber" wx:if="{{isPageShow}}">
         <view style="overflow-x: hidden">
             <view class="status-bar">
@@ -56,7 +56,7 @@
             <view class="block">
                 <view class="flex-row block-row">
                     <view class="flex-grow-1">商品总额</view>
-                    <view class="flex-grow-0" wx:if="{{order}}">￥{{order.goods_total_price}}</view>
+                    <view class="flex-grow-0" wx:if="{{order}}">￥{{order.pay_price}}</view>
                     <view class="flex-grow-0" wx:else>￥0.00</view>
                 </view>
                 <view class="flex-row block-row">
@@ -142,5 +142,5 @@
             </view>
         </view>
     </view>
-    <include src="/components/footer/footer"></include>
+    <include src="/components/footer/footer.wxml"></include>
 </view>
Index: pages/balance/balance.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>var is_more = !1;\n\nPage({\n    data: {\n        show: !1\n    },\n    onLoad: function(t) {\n        getApp().page.onLoad(this, t);\n    },\n    getData: function() {\n        var e = this;\n        getApp().core.showLoading({\n            title: \"加载中\"\n        }), getApp().request({\n            url: getApp().api.recharge.record,\n            data: {\n                date: e.data.date_1 || \"\"\n            },\n            success: function(t) {\n                e.setData({\n                    list: t.data.list\n                }), getApp().core.hideLoading(), is_more = !1;\n            }\n        });\n    },\n    onReady: function() {\n        getApp().page.onReady(this);\n    },\n    onShow: function() {\n        getApp().page.onShow(this);\n        var e = this;\n        getApp().core.showLoading({\n            title: \"加载中\"\n        });\n        var a = getApp().core.getStorageSync(getApp().const.USER_INFO);\n        getApp().request({\n            url: getApp().api.recharge.index,\n            success: function(t) {\n                a.money = t.data.money, getApp().core.setStorageSync(getApp().const.USER_INFO, a), \n                e.setData({\n                    user_info: a,\n                    list: t.data.list,\n                    setting: t.data.setting,\n                    date_1: t.data.date,\n                    date: t.data.date.replace(\"-\", \"年\") + \"月\"\n                }), getApp().core.hideLoading();\n            }\n        });\n    },\n    dateChange: function(t) {\n        if (!is_more) {\n            is_more = !0;\n            var e = t.detail.value, a = e.replace(\"-\", \"年\") + \"月\";\n            this.setData({\n                date: a,\n                date_1: e\n            }), this.getData();\n        }\n    },\n    dateUp: function() {\n        var t = this;\n        if (!is_more) {\n            is_more = !0;\n            var e = t.data.date_1, a = (t.data.date, new Date(e));\n            a.setMonth(a.getMonth() + 1);\n            var o = a.getMonth() + 1;\n            o = (o = o.toString())[1] ? o : \"0\" + o, t.setData({\n                date: a.getFullYear() + \"年\" + o + \"月\",\n                date_1: a.getFullYear() + \"-\" + o\n            }), t.getData();\n        }\n    },\n    dateDown: function() {\n        var t = this;\n        if (!is_more) {\n            is_more = !0;\n            var e = t.data.date_1, a = (t.data.date, new Date(e));\n            a.setMonth(a.getMonth() - 1);\n            var o = a.getMonth() + 1;\n            o = (o = o.toString())[1] ? o : \"0\" + o, t.setData({\n                date: a.getFullYear() + \"年\" + o + \"月\",\n                date_1: a.getFullYear() + \"-\" + o\n            }), t.getData();\n        }\n    },\n    click: function() {\n        this.setData({\n            show: !0\n        });\n    },\n    close: function() {\n        this.setData({\n            show: !1\n        });\n    },\n    GoToDetail: function(t) {\n        var e = t.currentTarget.dataset.index, a = this.data.list[e];\n        getApp().core.navigateTo({\n            url: \"/pages/balance/detail?order_type=\" + a.order_type + \"&id=\" + a.id\n        });\n    }\n});
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/pages/balance/balance.js b/pages/balance/balance.js
--- a/pages/balance/balance.js	
+++ b/pages/balance/balance.js	
@@ -17,11 +17,13 @@
                 date: e.data.date_1 || ""
             },
             success: function(t) {
+                console.log(t)
+                console.log("成功")
                 e.setData({
                     list: t.data.list
                 }), getApp().core.hideLoading(), is_more = !1;
             }
-        });
+        }); 
     },
     onReady: function() {
         getApp().page.onReady(this);
@@ -36,6 +38,7 @@
         getApp().request({
             url: getApp().api.recharge.index,
             success: function(t) {
+                console.log(t)
                 a.money = t.data.money, getApp().core.setStorageSync(getApp().const.USER_INFO, a), 
                 e.setData({
                     user_info: a,
